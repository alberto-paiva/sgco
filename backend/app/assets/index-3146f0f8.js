var Kt=Object.defineProperty;var Zt=(a,s,t)=>s in a?Kt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var R=(a,s,t)=>(Zt(a,typeof s!="symbol"?s+"":s,t),t);import{u as B,j as e,v as Xt,r as m,b as At,c as Oe,C as ea,d as Fe,e as w,l as Ge,f as ta,S as aa,g as U,h as sa,n as na,i as oa,R as ia}from"./vendor-cca8326a.js";import{d as Ft,a as ra}from"./dayjs-ae816a4a.js";import{B as T,u as We,A as re,I as L,c as C,a as _,D as ae,U as wt,M as la,R as ca,b as it,d as da,e as rt,f as G,g as Rt,h as de,P as we,T as Re,i as De,C as D,j as ma,k as Je,l as ua,m as pa,n as Te,F as ha,o as xa,S as fa,p as ga}from"./primereact-88fa395c.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const ja="/sgco/app/assets/bxs-minus-circle-ad1554d0.svg";function va(){const[a,s]=B();return e.jsx("section",{children:e.jsx("div",{className:"exception-body notfound",children:e.jsxs("div",{className:"exception-panel",style:{borderRadius:"25px;"},children:[e.jsx("div",{className:"exception-image",children:e.jsx("img",{src:ja,alt:"Exception Icon"})}),e.jsxs("div",{className:"exception-detail",children:[e.jsx("div",{className:"text-center bg-gray-200",children:e.jsx("span",{className:"font-bold text-3xl inline-block px-3",children:"404"})}),e.jsx("h1",{className:"pt-2",children:"PÁGINA NÃO ENCONTRADA"}),e.jsx("p",{children:`Requested resource is not available. [${a}]`}),e.jsx("a",{"aria-label":"GO TO DASHBOARD",onClick:()=>{s("/",{replace:!0})},children:e.jsx(T,{label:"GO TO DASHBOARD",size:"small",icon:"pi pi-replay",tabIndex:0})})]})]})})})}const Dt="/sgco/app/assets/preact-a83a7f59.svg";function ya(){return e.jsxs("div",{className:"layout-footer",children:[e.jsx("img",{src:Dt,alt:"Logo",height:"20",className:"mr-2"}),e.jsxs("div",{children:["SGCO © ",new Date().getFullYear()]}),"  by",e.jsx("span",{className:"font-medium ml-2",children:e.jsx("a",{className:"",href:"https://github.com/alberto-paiva",target:"_blank",rel:"noopener noreferrer",children:"Alberto Paiva"})})]})}const Ce="/sgco/uploads/images/",lt="/sgco/uploads/archives/",Qe=()=>String(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,""),H=a=>new Promise(s=>setTimeout(s,a)),V=(a,s="YYYY-MM-DD")=>Ft(a,["DD/MM/YYYY","DDMMYYYY","DD-MM-YYYY","YYYY-MM-DD","YYYYMMDD","YYYY"]).format(s),ba=(a,s)=>s&&a.size>s?{message:{severity:"error",summary:`${a.name}: Tamanho inválido!`,detail:`Máximo: ${Pt(s)}.`},status:!1}:{message:null,status:!0},$e=()=>String(new Date().getFullYear()),It=(a,s,t)=>Array.from({length:s??10},(o,r)=>String(t?a??new Date().getFullYear()+r:a??new Date().getFullYear()-r)),Pt=a=>{if(a===0)return"0 B";const s=a===0?0:Math.floor(Math.log(a)/Math.log(1024));return Number(a/Math.pow(1024,s)).toFixed(2)+" "+["B","kB","MB","GB","TB","P","E","Z","Y"][s]};function Mt(a){if(a=a.replace(/\D+/g,""),a.length!==11||a.match(/(\d)\1{10}/))return!1;const s=a.split("").map(o=>+o),t=o=>s.slice(0,o-12).reduce((r,n,p)=>r+n*(o-p),0)*10%11%10;return t(10)===s[9]&&t(11)===s[10]}function q(){return Xt()}function kt(a){return a&&a.length===8&&(a=a.replace(/(\d{5})(\d{3})/,"$1-$2")),a??""}function ct(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Ue(a){if(!a)return!1;const s=new XMLHttpRequest;return s.open("HEAD",a,!1),s.send(),s.status!==404}async function Ke(a){const t=await(await fetch(a)).blob(),o={type:t.type},r=a.replace(/\?.+/,"").split("/").pop()??"unknown";return new File([t],r,o)}function Ie(a,s){if(a&&s){const t=`${Ce}${s}/${a}`;return Ue(t)?t:void 0}}function Ca({title:a="Perfil",content:s,visible:t,setVisible:o,loggedUser:r}){var x;const[n,p]=m.useState(),l=wt();We(()=>{p(r)});const j=e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{style:{margin:"0.5rem"},children:a})," ",(n==null?void 0:n.tipo)==="C"?"Condômino":(n==null?void 0:n.tipo)==="S"?"Síndico":(n==null?void 0:n.tipo)==="P"?"Profissional":(n==null?void 0:n.tipo)==="A"?"Administrador":""]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{image:(n==null?void 0:n.imagemPerfil)&&Ie(n==null?void 0:n.imagemPerfil,n==null?void 0:n.uuid),imageAlt:"Avatar",className:"text-blue-700 p-mr-2",style:{verticalAlign:"middle",fontSize:"1.5rem",margin:"0.5rem"},size:"xlarge",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:["Nome: ",n==null?void 0:n.nome]})}),e.jsx("div",{children:e.jsxs("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:["E-mail: ",n==null?void 0:n.email]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{children:["CPF:","  ",e.jsx(L,{id:"cpf",mask:"999.999.999-99",placeholder:"000.000.000-00",value:n==null?void 0:n.cpf,pt:{root:{className:C("border-none","p-0")}}})]}),e.jsx("hr",{}),e.jsxs("div",{children:["Contato:"," ",e.jsx(L,{id:"telefone",mask:(n==null?void 0:n.contato.length)===11?"(99)99999-9999":"(99)9999-9999",placeholder:"(00)00000-0000",value:n==null?void 0:n.contato,pt:{root:{className:C("border-none","p-0")}}})]}),e.jsx("hr",{}),e.jsxs("div",{children:[(n==null?void 0:n.tipo)==="C"?"Proprietário: ":"",(n==null?void 0:n.tipo)==="C"&&e.jsx("i",{className:C("pi",{"text-green-500 pi-check-circle":n==null?void 0:n.proprietario,"text-pink-500 pi-times-circle":!(n!=null&&n.proprietario)})}),"Ativo:"," ",e.jsx("i",{className:C("pi",{"text-green-500 pi-check-circle":n==null?void 0:n.ativo,"text-pink-500 pi-times-circle":!(n!=null&&n.ativo)})})]}),e.jsx("hr",{}),e.jsxs("div",{children:["Data entrada:"," ",e.jsx(L,{id:"telefone",mask:"99/99/9999",placeholder:"00/00/0000",value:n!=null&&n.dataEntrada?V(n==null?void 0:n.dataEntrada,"DD/MM/YYYY"):void 0,pt:{root:{className:C("border-none","p-0")}}})]}),e.jsx("hr",{}),e.jsxs("div",{children:["Data saída:"," ",e.jsx(L,{id:"telefone",mask:"99/99/9999",placeholder:"00/00/0000",value:n!=null&&n.dataSaida?V(n==null?void 0:n.dataSaida,"DD/MM/YYYY"):void 0,pt:{root:{className:C("border-none","p-0")}}})]}),e.jsx("hr",{}),e.jsxs("div",{children:["Observacao:"," ",e.jsx(_,{type:"text",value:n==null?void 0:n.observacao,pt:{root:{className:C("border-none","p-0")}}})]}),e.jsx("hr",{})]}),b=e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),s,e.jsxs("span",{className:"text-color-secondary text-xs",style:{verticalAlign:"middle"},children:["Last IP: ",n==null?void 0:n.lastIP," | Last Login:"," ",(r==null?void 0:r.lastLogin)&&new Date(+(r==null?void 0:r.lastLogin)).toLocaleString()]}),e.jsx("br",{}),e.jsxs("span",{className:"text-color-secondary text-xs",style:{verticalAlign:"middle"},children:["IDX: [ ",n==null?void 0:n.id,"/",n==null?void 0:n.uuid,"/T: ",(x=n==null?void 0:n.tipo)==null?void 0:x.toUpperCase()," ","]"]})]})}),y=e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsx(T,{label:"Fechar",icon:"pi pi-times",onClick:()=>{o(!1)},severity:"danger",className:"align-left mr-4",pt:{root:{style:{margin:"0"}}},size:"small",raised:!0}),e.jsx(T,{label:"Salvar",icon:"pi pi-check",onClick:()=>{o(!1)},className:"align-right",size:"small",raised:!0,autoFocus:!0})]});return e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(ae,{id:l,header:j,visible:t,onHide:()=>{o(!1)},footer:y,contentStyle:{width:"auto",padding:"0 1.5rem"},headerStyle:{width:"auto",padding:"1.5rem 1.5rem 0rem"},children:e.jsx("p",{className:"m-0",children:b})})})}const $t="http://localhost/sgco",F="/api.php/records",Na=(a,s)=>a&&(s["Content-Type"]="application/json",JSON.stringify(a)),Sa={method:"GET",maxBodyLength:1/0,baseURL:$t,headers:{"content-type":"application/octet-stream"},responseType:"json",transformRequest:[Na],transformResponse:[a=>Object.prototype.hasOwnProperty.call(JSON.parse(a),"records")?JSON.parse(a).records:JSON.parse(a)]},O=At.create(Sa);async function dt(a){try{const s="https://api.ipify.org",t="https://api64.ipify.org",o={};a!=null&&a.format&&(o.format=a==null?void 0:a.format),a!=null&&a.callback&&(a==null?void 0:a.format)==="jsonp"&&(o.callback=a==null?void 0:a.callback),(a==null?void 0:a.format)==="getip"&&(o.format="jsonp",o.callback="getip");const r=(a==null?void 0:a.protocol)==="ipv6"?t:s;return(await At.get(r,{params:o})).data}catch(s){throw console.error(s),s}}const _e=`${$t}/api.php`,Ee=Oe(_e);var le=(a=>(a[a.Id=0]="Id",a[a.NomeUsuario=1]="NomeUsuario",a[a.Senha=2]="Senha",a[a.Tipo=3]="Tipo",a[a.Ativo=4]="Ativo",a[a.IdPessoa=5]="IdPessoa",a[a.LastIP=6]="LastIP",a[a.LastLogin=7]="LastLogin",a[a.IdTable2=8]="IdTable2",a[a.Uuid=9]="Uuid",a[a.Nome=10]="Nome",a[a.Email=11]="Email",a[a.CPF=12]="CPF",a[a.Contato=13]="Contato",a[a.DataEntrada=14]="DataEntrada",a[a.DataSaida=15]="DataSaida",a[a.ImagemPerfil=16]="ImagemPerfil",a[a.Observacao=17]="Observacao",a[a.Proprietario=18]="Proprietario",a[a.PessoaAtiva=19]="PessoaAtiva",a[a.IdUnidade=20]="IdUnidade",a[a.Bloco=21]="Bloco",a[a.Numero=22]="Numero",a[a.ObservacaoUnidade=23]="ObservacaoUnidade",a[a.IdCondominio=24]="IdCondominio",a[a.NomeCondominio=25]="NomeCondominio",a))(le||{});class Ea{constructor(){R(this,"USER_KEY","yuploggeduser");R(this,"userip")}async login(s,t){try{const o=await Ee.login(s,t);let r=null;this.userip=await dt();const n=o==null?void 0:o.ativo;return o&&n&&!await this.isValidLoginTime()&&await Ee.update("usuario",o.id,{lastLogin:Date.now().toString(),lastIP:this.userip}),o&&(r=await Ee.read(o.tipo==="C"?"usuarioscondominos":o.tipo==="S"?"usuariossindicos":"",o.id)),localStorage.setItem(this.USER_KEY,JSON.stringify(r)),(o==null?void 0:o.id)&&n&&r}catch(o){return console.log(JSON.stringify(o)),!1}}async logout(){try{return Ee.logout()}catch(s){return console.log(JSON.stringify(s)),s}finally{localStorage.removeItem(this.USER_KEY)}}async register(s,t){try{return Ee.register(s,t)}catch(o){return console.log(JSON.stringify(o)),o}}getCurrentUser(){try{const s=localStorage.getItem(this.USER_KEY);if(s)return JSON.parse(s)}catch(s){return console.log(JSON.stringify(s)),null}}getCurrentUserField(s){try{const t=this.getCurrentUser();switch(s){case 0:return t==null?void 0:t.id;case 1:return t==null?void 0:t.nomeusuario;case 2:return"";case 3:return t==null?void 0:t.tipo;case 5:return t==null?void 0:t.idPessoa;case 6:return t==null?void 0:t.lastIP;case 7:return t==null?void 0:t.lastLogin;case 8:return t==null?void 0:t.idTable2;case 9:return t==null?void 0:t.uuid;case 10:return t==null?void 0:t.nome;case 11:return t==null?void 0:t.email;case 12:return t==null?void 0:t.cpf;case 13:return t==null?void 0:t.contato;case 14:return t==null?void 0:t.dataEntrada;case 15:return t==null?void 0:t.dataSaida;case 16:return t==null?void 0:t.imagemPerfil;case 17:return t==null?void 0:t.observacao;case 18:return t==null?void 0:t.proprietario;case 19:return t==null?void 0:t.pessoaAtiva;case 20:return t==null?void 0:t.idUnidade;case 21:return t==null?void 0:t.bloco;case 22:return t==null?void 0:t.numero;case 23:return t==null?void 0:t.observacaoUnidade;case 24:return t==null?void 0:t.idCondominio;case 25:return t==null?void 0:t.nomeCondominio;case 4:return t==null?void 0:t.ativo;default:return null}}catch(t){return console.log(JSON.stringify(t)),null}}getCurrentUserRole(){try{const s=localStorage.getItem(this.USER_KEY);let t=null;return s&&(t=JSON.parse(s)),t==null?void 0:t.tipo}catch(s){return console.log(JSON.stringify(s)),null}}userIsCondomino(){try{return this.getCurrentUserRole()==="C"}catch(s){return console.log(JSON.stringify(s)),!1}}async getCurrentFullUser(){try{const s=await Ee.read("usuario",this.getCurrentUser().id),t=s==null?void 0:s.ativo;return s&&t&&!await this.isValidLoginTime()?s:null}catch(s){return console.log(JSON.stringify(s)),s}}async isValidLoginTime(){let s=!1;try{const t=this.getCurrentUser();if(t){const o=new Date(+t.lastLogin).setUTCHours(0,0,0,0),r=new Date(Date.now()).setUTCHours(0,0,0,0);s=o===r&&t.lastIP===await dt()}return s}catch(t){return console.log(JSON.stringify(t)),s}}}const k=new Ea;function Ta({title:a="SGCO",profileSidebarVisible:s,onMenuToggle:t,showProfileSidebar:o,loggedUser:r}){const[n,p]=m.useState(),[l,j]=m.useState(!1),[,b]=B(),y=m.useRef(null);m.useEffect(()=>{r&&p(r)},[r]);const x=N=>{var A;(A=y.current)==null||A.toggle(N)},v=[{label:"Opções",template:(N,A)=>e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{image:(n==null?void 0:n.imagemPerfil)&&Ie(n==null?void 0:n.imagemPerfil,n==null?void 0:n.uuid),imageAlt:"Avatar",className:"text-blue-700 p-mr-2",style:{verticalAlign:"middle",fontSize:"1.5rem",margin:"0.5rem"},size:"normal",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-xs",style:{marginLeft:".5em",verticalAlign:"middle"},children:n==null?void 0:n.nome})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-xs",style:{marginLeft:".5em",verticalAlign:"middle"},children:n==null?void 0:n.email})})]})]})},{separator:!0},{label:"Perfil",icon:"pi pi-user",command:()=>{j(N=>!N)}},{separator:!0},{label:"Sair",icon:"pi pi-sign-out",command:()=>{k.logout().then(()=>{H(500).then(()=>{b("/login",{replace:!0})})})}}];return e.jsxs("div",{className:"layout-topbar",children:[e.jsxs("a",{className:"layout-topbar-logo",onClick:()=>{b("/",{replace:!0})},children:[e.jsx("img",{src:Dt,width:"47.22px",height:"35px",alt:"logo"}),e.jsx("span",{children:a})]}),e.jsx(T,{type:"button",icon:"pi pi-bars",rounded:!0,text:!0,raised:!0,pt:{root:{style:{fontSize:"0.75rem",margin:"0.4rem"}}},onClick:t}),e.jsx(T,{type:"button",icon:"pi pi-ellipsis-v",rounded:!0,text:!0,raised:!0,pt:{root:{style:{fontSize:"0.75rem",margin:"0.4rem"}}},"aria-label":"Profile",className:"layout-topbar-menu-button",onClick:()=>{o(),j(N=>!N)}}),e.jsxs("div",{className:C("layout-topbar-menu",{"layout-topbar-menu-mobile-active":s}),children:[e.jsx(T,{type:"button",icon:"pi pi-calendar",rounded:!0,text:!0,raised:!0,pt:{root:{style:{fontSize:"0.75rem",margin:"0.4rem"}}},"aria-label":"Calendar"}),e.jsx(la,{ref:y,model:v,popup:!0}),e.jsx(T,{type:"button",icon:"pi pi-cog",rounded:!0,text:!0,raised:!0,pt:{root:{style:{fontSize:"0.75rem",margin:"0.4rem"}}},"aria-label":"Settings",onClick:x})]}),l&&e.jsx(Ca,{title:"Perfil",content:e.jsx("pre",{children:"Informações do Usuário"}),visible:l,setVisible:N=>{j(N)},loggedUser:n})]})}const ue=!k.userIsCondomino(),Aa=[{root:!0,visible:!0,items:[{label:"Dashboard",icon:"pi pi-fw pi-th-large",href:"/",visible:!0}]},{separator:!0,visible:!0},{root:!0,visible:!0,items:[{label:"Condôminos",icon:"pi pi-fw pi-users",href:"/condominos/list",visible:!0},{label:"Condôminios",icon:"pi pi-fw pi-building",href:"/condominios/list",visible:!0},{label:"Síndicos",icon:"pi pi-fw pi-eye",href:"/sindicos/list",visible:!0},{label:"Endereços",icon:"pi pi-fw pi-book",href:"/enderecos/list",visible:ue},{label:"Apartamentos",icon:"pi pi-fw pi-table",href:"/unidades/list",visible:ue},{label:"Financeiro",icon:"pi pi-fw pi-dollar",visible:!0,subItems:[{label:"Receitas",icon:"pi pi-fw pi-arrow-circle-up",href:"/receitas/list",visible:ue},{label:"Despesas",icon:"pi pi-fw pi-arrow-circle-down",href:"/despesas/list",visible:ue},{label:"Mensalidades",icon:"pi pi-fw pi-credit-card",href:"/mensalidades/list",visible:!ue}]},{label:"Relatórios",icon:"pi pi-fw pi-chart-bar",visible:!0,subItems:[{label:"Condôminos",icon:"pi pi-fw pi-user",href:"/relatorios/condominos",visible:ue},{label:"Unidades",icon:"pi pi-fw pi-home",href:"/relatorios/unidades",visible:ue},{label:"Financeiro",icon:"pi pi-fw pi-sort-numeric-up",href:"/relatorios/financeiro",visible:!0}]}]},{separator:!0,visible:!0}];function Fa({loggedUser:a}){const[s,t]=m.useState(),[o,r]=m.useState(""),[n,p]=m.useState(""),[l,j]=B(),b=N=>N===o,y=(N,A,M)=>{if(p(n===M?"":M),A.disabled){N.preventDefault();return}A.onMenuButtonClick&&A.onMenuButtonClick({originalEvent:N.nativeEvent,item:A})},x=(N,A,M,c)=>{y(N,A,M),j(c,{replace:!1})};m.useEffect(()=>{r(l)},[r,p,l]),m.useEffect(()=>{a&&t(a)},[a]);function v(N,A){const M=C(N.className,"p-ripple",{"active-route":b(N.href)}),c=e.jsx(e.Fragment,{children:e.jsxs("a",{onClick:h=>{x(h,N,A,N.href??l)},className:C(M),target:N.target,tabIndex:0,children:[e.jsx("i",{className:C("layout-menuitem-icon",N.icon)}),e.jsx("span",{className:"layout-menuitem-text",children:N.label}),N.subItems&&e.jsx("i",{className:"pi pi-fw pi-angle-down layout-submenu-toggler"}),e.jsx(ca,{})]})});return N.visible?c:null}return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"layout-menu",children:Aa.map((N,A)=>{var M;return N.separator?e.jsx("li",{className:"menu-separator"},A):e.jsxs("li",{className:C({"layout-root-menuitem":N.root,"active-menuitem":b(N.href)}),children:[N.root&&N.visible&&e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"layout-menuitem-root-text",children:N.label})}),N.items&&N.visible&&e.jsx("ul",{children:(M=N.items)==null?void 0:M.map((c,h)=>{var S;return e.jsxs("li",{children:[v(c,`${h}-${c.label}`),c.subItems&&c.visible&&e.jsx("div",{children:e.jsx(ea,{timeout:{enter:1e3,exit:450},classNames:"layout-submenu",in:n.includes(`${h}-${c.label}`),children:e.jsx("ul",{children:(S=c.subItems)==null?void 0:S.map((g,i)=>e.jsx("li",{children:v(g,`${i}-${g.label}`)},`${i}-${g.label}`))})},c.label)})]},`${h}-${c.label}`)})})]},A)})})})}const wa={ripple:!1,inputStyle:"outlined",menuMode:"static",colorScheme:"light",theme:"lara-light-indigo",scale:14},Ra={overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuDesktopInactive:!1,staticMenuMobileActive:!1,menuHoverActive:!1};function W({title:a,children:s}){const[t,o]=m.useState(wa),[r,n]=m.useState(Ra),[p,l]=m.useState(),j=()=>window.innerWidth>991,b=()=>t.menuMode==="overlay",y=()=>{n(f=>{const I=b()?!f.overlayMenuActive:!1,J=j()?!f.staticMenuDesktopInactive:!1,Q=j()?!1:!f.staticMenuMobileActive;return{...f,overlayMenuActive:I,staticMenuDesktopInactive:J,staticMenuMobileActive:Q}})},x=()=>{o(I=>I),(()=>{const I=r.profileSidebarVisible;n({...r,profileSidebarVisible:!I})})()},v=()=>{document.body.classList.add("blocked-scroll")},N=()=>{document.body.classList.remove("blocked-scroll")},A=()=>{n(f=>({...f,overlayMenuActive:!1,staticMenuMobileActive:!1,menuHoverActive:!1})),h(),N()},M=f=>{f.target.classList.contains("layout-mask")&&A()},[c,h]=it({type:"click",listener:M}),S=()=>{n(f=>({...f,profileSidebarVisible:!1})),u()},g=f=>{!f.target.classList.contains("layout-topbar-menu-mobile-active")&&S()},[i,u]=it({type:"click",listener:g});m.useEffect(()=>((r.overlayMenuActive||r.staticMenuMobileActive)&&c(),r.staticMenuMobileActive&&v(),()=>{h()}),[c,r.overlayMenuActive,r.staticMenuMobileActive,h]),m.useEffect(()=>(r.profileSidebarVisible&&i(),()=>{u()}),[i,r.profileSidebarVisible,u]),m.useEffect(()=>{const f=localStorage.getItem(k.USER_KEY);f&&l(JSON.parse(f))},[]),da(()=>{h(),u()});const d=C("layout-wrapper","page-break",{"layout-overlay":t.menuMode==="overlay","layout-static":t.menuMode==="static","layout-static-inactive":r.staticMenuDesktopInactive&&t.menuMode==="static","layout-overlay-active":r.overlayMenuActive,"layout-mobile-active":r.staticMenuMobileActive,"p-input-filled":t.inputStyle==="filled","p-ripple-disabled":!t.ripple});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d,children:[e.jsx(Ta,{title:a,onMenuToggle:y,showProfileSidebar:x,profileSidebarVisible:r.profileSidebarVisible,loggedUser:p}),e.jsx("div",{className:"layout-sidebar",children:e.jsx(Fa,{})}),e.jsxs("div",{className:"layout-main-container flex-auto",children:[e.jsx("div",{className:"layout-main",children:s}),e.jsx(ya,{})]}),e.jsx("div",{className:"layout-mask"})]})})}function Da({title:a="ERRO",content:s,labelYes:t="Sim",labelNo:o="Não",showYes:r=!0,showNo:n=!0,visible:p,setVisible:l}){const j=wt(),b=e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"pi pi-exclamation-triangle text-red-700 pr-2",style:{fontSize:"1.5rem"}}),e.jsx("span",{children:a})]}),y=e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),s]}),x=e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),n&&e.jsx(T,{label:o,icon:"pi pi-times",onClick:()=>{l(!1)},severity:"danger",className:"align-left",pt:{root:{style:{margin:"0"}}},size:"small",raised:!0}),r&&e.jsx(T,{label:t,icon:"pi pi-check",onClick:()=>{l(!1)},className:"align-right",size:"small",raised:!0,autoFocus:!0})]});return e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(ae,{id:j,header:b,visible:p,onHide:()=>{l(!1)},footer:x,contentStyle:{width:"auto",padding:"0 1.5rem"},headerStyle:{width:"auto",padding:"1.5rem 1.5rem 0rem"},children:e.jsx("p",{className:"m-0",children:y})})})}const mt=["image/png","image/jpeg","image/jpg"],Ze=({label:a="Selecionar",selectedImage:s,disabled:t,setSelectedImage:o})=>{const r=m.useRef(null),[n,p]=m.useState(),[l,j]=m.useState({}),[b,y]=m.useState(!1);function x(c){var h;c.preventDefault(),t||(h=r.current)==null||h.click()}const v=c=>c.split(".").pop(),N=m.useCallback(c=>{const h={name:c.name,size:Pt(c.size||0),type:c.type,ext:v(c.name)};j(h),p(c),o(c)},[o]),A=c=>{const h=c.type;return mt.includes(h)},M=c=>{if(c.files&&c.files.length>0){const h=c.files[0];if(A(h))try{N(h)}catch(S){console.log(S)}else y(!0)}};return m.useEffect(()=>{s&&(p(s),N(s))},[p,s,N]),e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"photo-uploader",children:a}),e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("input",{id:"photo-uploader",type:"file",ref:r,accept:mt.join(),onInput:c=>{M(c.target)},style:{display:"none"}}),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(re,{imageAlt:l==null?void 0:l.name,image:URL.createObjectURL(n),className:"p-mr-2",style:{verticalAlign:"middle"},size:"xlarge",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}},onClick:x})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:l==null?void 0:l.name})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:`${l==null?void 0:l.size} / 30 MB`})})]})]}):e.jsx("div",{children:e.jsx(re,{imageAlt:"Avatar",className:"p-mr-2",style:{verticalAlign:"middle"},size:"xlarge",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}},onClick:x})})]}),b&&e.jsx(Da,{title:"Arquivo Inválido!",content:e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"O arquivo que você selecionou possui uma extensão inválida!"}),e.jsxs("pre",{children:["Extensão selecionada: ",l==null?void 0:l.ext]}),e.jsx("pre",{children:"Formatos aceitos: png, jpeg ou jpg."})]}),showYes:!1,labelNo:"Fechar",visible:b,setVisible:c=>{y(c)}})]})},z=()=>{const a={data:null,dataArray:null,loading:!1,error:""},s=(r,n)=>{switch(n.type){case"FETCH_DATA_REQUEST":return{...r,loading:!0};case"FETCH_DATA_SUCCESS":return{...r,data:n.payload,loading:!1};case"FETCH_DATA_ARRAY_SUCCESS":return{...r,dataArray:n.payload,loading:!1};case"FETCH_DATA_FAILURE":return{...r,error:n.payload,loading:!1};default:return r}},[t,o]=m.useReducer(s,a);return{state:t,dispatch:o}},ut={nome:"",uuid:q(),email:"",cpf:void 0,contato:"",proprietario:!1,dataEntrada:"",dataSaida:void 0,observacao:void 0,tipo:"C",imagemPerfil:void 0,idUnidade:void 0,bloco:void 0,numero:void 0,observacaoUnidade:void 0,idCondominio:void 0};class Xe extends Error{constructor({name:t,message:o,cause:r,details:n}){super(o);R(this,"name");R(this,"cause");R(this,"details");this.name=t,this.cause=r,this.details=n,Object.setPrototypeOf(this,Xe.prototype)}toString(){let t=`${this.name}: ${this.message}`;return this.cause&&(t+=`
Caused by: ${this.cause.toString()}`),this.details&&(t+=`
Details: ${JSON.stringify(this.details,null,2)}`),t}toJSON(){return{name:this.name,message:this.message,cause:this.cause,details:this.details}}}class Y extends Xe{}const pe=class pe{constructor(){R(this,"getAllCondominos",async(s,t)=>{const o=t?`page=${t.start},${t.end}`:"page=0,100",r=await O({method:"GET",url:s?`${F}/condominocompleto?filter=bloco,eq,${s}&${o}`:`${F}/condominocompleto?${o}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(r.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar a lista de Condôminos.",cause:r.statusText,details:{errorCode:r.status,additionalInfo:"Failed to fetch data"}});return r.data});R(this,"getCondominoById",async s=>{const t=await O({method:"GET",url:`${F}/condominocompleto/${s}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar o Condômino.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"addUpdateCondomino",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/condomino/${s.id}`:`${F}/condomino`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} o Condômino.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteCondomino",s=>O({method:"DELETE",url:`${F}/condomino/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return pe.instance||(pe.instance=new pe),pe.instance}};R(pe,"instance",null);let Ne=pe;const he=class he{constructor(){}static getInstance(){return he.instance||(he.instance=new he),he.instance}async fileUpload(s){try{const t=new FormData;t.append("_method","post"),t.append("filepath",`uploads/${s.path}/${s.foderName}/`),t.append("file",s.file),console.log("formData: ",...t);const o=await O({method:"POST",url:"http://localhost/sgco/api.php/fileupload",data:t,headers:{Accept:"application/json","Content-Type":"multipart/form-data;","cache-control":"no-cache"},transformRequest:r=>r,params:{}});if(o.status!==200)throw new Error(`Ocorreu um erro no upload do arquivo. Status: ${o.status}`);return o.data}catch(t){throw new Error(`Ocorreu um erro no upload do arquivo: ${t.message}`)}}};R(he,"instance",null);let Ae=he;const xe=class xe{constructor(){R(this,"getNomeBlocos",async()=>{const s=await O({method:"GET",url:`${F}/unidadeblocosdistinct?page=0,100`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(s.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os nomes dos blocos.",cause:s.statusText,details:{errorCode:s.status,additionalInfo:"Failed to fetch data"}});return s.data});R(this,"getApartamentosPorBlocos",async s=>{const t=await O({method:"GET",url:`${F}/apartamentos${`?filter=bloco,eq,${s}`}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os apartamentos.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"getUnidadesPorBlocos",async s=>{const t=await O({method:"GET",url:`${F}/unidade${`?filter=bloco,eq,${s}`}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar as unidades.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"getAllUnidades",async(s,t)=>{const o=t?`page=${t.start},${t.end}`:"page=0,100",r=await O({method:"GET",url:s?`${F}/unidadescompletas?filter=idCondominio,eq,${s}&${o}`:`${F}/unidadescompletas?${o}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(r.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar a lista de Unidades.",cause:r.statusText,details:{errorCode:r.status,additionalInfo:"Failed to fetch data"}});return r.data});R(this,"getUnidadeById",async s=>{const t=await O({method:"GET",url:`${F}/unidade/${s}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar a Unidade.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"addUpdateUnidade",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/unidade/${s.id}`:`${F}/unidade`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} a Unidade.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteUnidade",s=>O({method:"DELETE",url:`${F}/unidade/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return xe.instance||(xe.instance=new xe),xe.instance}};R(xe,"instance",null);let ne=xe;function pt({id:a,title:s}){const t=z(),o=z(),r=z(),[n,p]=m.useState(),[l,j]=m.useState(ut),b=m.useRef(null),[,y]=B(),x=k.userIsCondomino(),{control:v,handleSubmit:N,reset:A,formState:{errors:M}}=Fe({mode:"onChange",defaultValues:l,values:l}),c="Este campo é obrigatório.",h=i=>{var u;return M[i]?e.jsx("small",{className:"p-error",children:(u=M[i])==null?void 0:u.message}):null},S=()=>{var i;(i=b.current)==null||i.show({severity:"success",summary:"Sucesso",detail:"Operação realizada com sucesso!"})},g=i=>{var f;console.log("Form Data:",i);const u=l.uuid??q(),d={id:(f=t.state.data)==null?void 0:f.id,uuid:u,nome:i.nome,email:i.email,cpf:i.cpf,contato:i.contato,proprietario:i.proprietario,dataEntrada:V(i.dataEntrada),dataSaida:i.dataSaida?V(i.dataSaida):void 0,observacao:i.observacao,tipo:i==null?void 0:i.tipo,idUnidade:i.idUnidade};try{if(i.imagemPerfil){const I=i.imagemPerfil;if(!Ue(`${Ce}${i.uuid}/${I.name}`)){const J=new File([I],Qe()+"_"+Date.now()+"."+I.name.split(".").pop());d.imagemPerfil=J.name;try{const Q={path:"images",file:J,foderName:i.uuid};Ae.getInstance().fileUpload(Q).then(console.log)}catch(Q){console.log("file_upload_error: ",Q)}}}console.log("onSubmit_condomino: ",JSON.stringify(d,null,4)),Ne.getInstance().addUpdateCondomino(d).then(I=>{console.log(I)}).catch(I=>{console.log(I)}),S()}catch{console.log(`ERRORS: :-(

`+JSON.stringify(M))}finally{H(100).then(()=>{y("/condominos/list",{replace:!0})})}};return m.useEffect(()=>{const i=async()=>{t.dispatch({type:"FETCH_DATA_REQUEST"});try{const d=a?await Ne.getInstance().getCondominoById(a):null;t.dispatch({type:"FETCH_DATA_SUCCESS",payload:d})}catch(d){t.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${d}`})}},u=async()=>{o.dispatch({type:"FETCH_DATA_REQUEST"});try{const d=await ne.getInstance().getNomeBlocos();o.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:d})}catch(d){o.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${d}`})}};i().then(d=>d),u().then(d=>d)},[]),m.useEffect(()=>{const i=async()=>{var d,f;const u=(d=t.state.data)==null?void 0:d.imagemPerfil;if(u)try{const I=await Ke(`${Ce}${(f=t.state.data)==null?void 0:f.uuid}/${u}`);p(I)}catch(I){console.error("Error loading condomino image:",I)}};t.state.data&&(i().then(u=>u),j({uuid:t.state.data.uuid??q(),nome:t.state.data.nome||"",email:t.state.data.email??void 0,cpf:t.state.data.cpf??void 0,contato:t.state.data.contato||"",proprietario:t.state.data.proprietario||!1,dataEntrada:t.state.data.dataEntrada?V(t.state.data.dataEntrada,"DD/MM/YYYY"):"",dataSaida:t.state.data.dataSaida?V(t.state.data.dataSaida,"DD/MM/YYYY"):void 0,observacao:t.state.data.observacao??"",tipo:"C",imagemPerfil:t.state.data.imagemPerfil??void 0,idUnidade:t.state.data.idUnidade??void 0,bloco:t.state.data.bloco??"",numero:t.state.data.numero??void 0,observacaoUnidade:t.state.data.observacaoUnidade??void 0,idCondominio:t.state.data.idCondominio??void 0}))},[t.state.data]),m.useEffect(()=>{(async()=>{r.dispatch({type:"FETCH_DATA_REQUEST"});try{const u=await ne.getInstance().getApartamentosPorBlocos(l.bloco);console.log("unidadesDataReducer: ",u),r.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:u})}catch(u){r.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${u}`})}})().then(u=>u)},[l.bloco,o.state.loading]),e.jsx(W,{title:s??`${a?"Editar":"Adicionar"} Condômino`,children:e.jsx("div",{className:"card",children:e.jsx("div",{children:t.state.loading?e.jsx("p",{children:"Loading..."}):t.state.error?e.jsx("p",{children:t.state.error}):e.jsx("div",{children:e.jsxs("form",{id:"form1",onSubmit:N(g),children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"nome",children:"Nome"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx(w,{name:"nome",control:v,defaultValue:l.nome,rules:{required:c},render:({field:i,fieldState:u})=>e.jsx(_,{...i,id:i.name,type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,nome:d.currentTarget.value})}})})]}),h("nome")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(w,{name:"email",control:v,defaultValue:l.email,rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Endereço de email inválido"}},render:({field:i,fieldState:u})=>e.jsx(_,{...i,id:"email",type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,email:d.currentTarget.value})}})})]}),h("email")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"cpf",children:"CPF"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-id-card"}),e.jsx(w,{name:"cpf",control:v,defaultValue:l.cpf,rules:{validate:i=>(i?Mt(i):!0)||"CPF inválido"},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"cpf",mask:"999.999.999-99",placeholder:"000.000.000-00",autoClear:!1,unmask:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,cpf:d.currentTarget.value})}})})]}),h("cpf")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"contato",children:"Contato"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-phone"}),e.jsx(w,{name:"contato",control:v,defaultValue:l.contato,rules:{pattern:{value:/^[0-9]{10,11}$/,message:"Contato inválido"},required:c},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"contato",mask:"(99)9999-9999?9",placeholder:"(00)0000-00000",autoClear:!0,unmask:!0,pt:{root:{className:C("p-inputtext-sm","w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,contato:d.currentTarget.value})}})})]}),h("contato")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataEntrada",children:"Data Entrada"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataEntrada",control:v,defaultValue:l.dataEntrada,rules:{required:c,pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"dataEntrada",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,dataEntrada:d.currentTarget.value})},disabled:x})})]}),h("dataEntrada")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataSaida",children:"Data Saída"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataSaida",control:v,defaultValue:l.dataSaida,rules:{pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"dataSaida",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{i.onChange(d.currentTarget.value),j({...l,dataSaida:d.currentTarget.value})},disabled:x})})]}),h("dataSaida")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"bloco",children:"Bloco"}),e.jsx(w,{name:"bloco",control:v,defaultValue:l.bloco,rules:{required:c},render:({field:i,fieldState:u})=>{var d;return e.jsx(G,{...i,id:"bloco",options:(d=o.state.dataArray)==null?void 0:d.map(f=>f.label),optionLabel:"",placeholder:"Selecione",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),emptyMessage:o.state.dataArray?"Selecione o bloco!":"Sem resultados",value:i.value,onChange:f=>{i.onChange(f.value),j({...l,bloco:f.value})},disabled:x})}}),h("bloco")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"idUnidade",children:"Apartamento"}),e.jsx(w,{name:"idUnidade",control:v,defaultValue:l.idUnidade,rules:{required:c},render:({field:i,fieldState:u})=>{var d;return e.jsx(G,{id:"idUnidade",options:r.state.dataArray??[],defaultValue:i.value,optionLabel:"label",placeholder:"Selecione",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),emptyMessage:(d=r.state.dataArray)!=null&&d.length?"Selecione a unidade!":"Sem resultados",disabled:!l.bloco||x,tooltip:`${l.bloco?"":"Selecione primeiro o bloco!"}`,tooltipOptions:{position:"bottom",showOnDisabled:!0},value:i.value,onChange:f=>{i.onChange(f.value),j({...l,idUnidade:f.value})}})}}),h("idUnidade")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"proprietario",children:"É proprietário?"}),e.jsx("div",{children:e.jsx(w,{name:"proprietario",control:v,defaultValue:l.proprietario,render:({field:i,fieldState:u})=>e.jsx(Rt,{id:"proprietario",className:C("p-inputtext-sm",{"p-invalid":u.error}),checked:i.value,onChange:d=>{i.onChange(d.value),j({...l,proprietario:d.value??!1})},disabled:x})})}),h("proprietario")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx(w,{name:"imagemPerfil",control:v,defaultValue:l.imagemPerfil,render:({field:i})=>e.jsx(Ze,{label:`Foto${x?"":" (Clique na imagem para selecionar)"}`,disabled:x,selectedImage:n,setSelectedImage:u=>{i.onChange(u),p(u)}})}),h("imagemPerfil")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacoes",children:"Observações"}),e.jsx(w,{name:"observacao",control:v,defaultValue:l.observacao,render:({field:i,fieldState:u})=>e.jsx(de,{id:"observacoes",rows:4,autoResize:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onChange:d=>{i.onChange(d.currentTarget.value),j({...l,observacao:d.currentTarget.value})}})}),h("observacao")]})]})}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[e.jsx(T,{label:"Submit",type:"submit",icon:"pi pi-check"}),e.jsx(T,{label:"Resetar",type:"button",severity:"secondary",icon:"pi pi-refresh",onClick:()=>{A(ut),p(void 0)}}),e.jsx(T,{label:"Cancelar",type:"button",severity:"danger",icon:"pi pi-times",onClick:async()=>{await H(100).then(()=>{y("/condominos/list",{replace:!0})})}})," "]})]})})})})})}const Ia=a=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{imageAlt:a.nome,image:Ie(a.imagemPerfil,a.uuid),className:"p-mr-2",style:{verticalAlign:"middle"},size:"large",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:a.nome})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:a.email})})]})]})}),Pa=a=>e.jsx("i",{className:C("pi",{"text-green-500 pi-check-circle":a.proprietario,"text-pink-500 pi-times-circle":!a.proprietario})}),Ma=a=>e.jsx(L,{id:"cpf",mask:"999.999.999-99",placeholder:"000.000.000-00",value:a.cpf,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}}),ka=a=>e.jsx(L,{id:"telefone",mask:a.contato.length===11?"(99)99999-9999":"(99)9999-9999",placeholder:"(00)00000-0000",value:a.contato,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}}),$a=a=>e.jsxs("div",{children:["BL.",a==null?void 0:a.bloco," - AP.",a==null?void 0:a.numero]}),Oa=({dt:a,showModalEdit:s,setSelectedBloco:t})=>{const[o,r]=m.useState([]),[n,p]=m.useState(),[l,j]=m.useState(""),[,b]=B(),y=()=>{var v;(v=a==null?void 0:a.current)==null||v.exportCSV({selectionOnly:!1})},x=()=>{j("Carregando..."),ne.getInstance().getNomeBlocos().then(v=>{j(""),r(v)}).catch(v=>{j("Erro: "+v.message),console.log("ERROR: ",l)})};return We(()=>{x()}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center justify-content-start gap-2",children:[k.userIsCondomino()?null:e.jsx(G,{id:"filter-bloco",options:o,optionLabel:"label",placeholder:"Selecione o Bloco!",className:C("p-inputtext-sm w-full"),emptyMessage:o?"Selecione o bloco!":"Sem resultados",value:n,onChange:v=>{p(v.value),t(v.value)},showClear:!0}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[k.userIsCondomino()?null:e.jsx(T,{type:"button",label:"Novo",icon:"pi pi-plus",rounded:!0,onClick:v=>{v.preventDefault(),s(),b("/condominos/add",{replace:!0})},"data-pr-tooltip":"Novo",size:"small"}),e.jsx(T,{type:"button",icon:"pi pi-file",severity:"info",label:"CSV",rounded:!0,onClick:()=>{y()},"data-pr-tooltip":"CSV",size:"small"})]})]})})};function Ua({condominos:a,loading:s,loadingMessage:t,reload:o,exportSelectedBloco:r}){const n=m.useRef(null),p=m.useRef(null),[l,j]=m.useState(!1),[b,y]=m.useState(!1),[x,v]=m.useState(),[N,A]=m.useState(),[,M]=B(),c=i=>{j(!0),v(i)},h=i=>{y(!0),v(i)};function S(){const i={...x};i.id&&Ne.getInstance().deleteCondomino(i.id).then(()=>{var u;y(!1),v(void 0),(u=p.current)==null||u.show({severity:"success",summary:"Successo",detail:"Condômino Excluido",life:3e3})}),console.log(`condomino excluido:
`,JSON.stringify(i,null,4))}const g=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var i;y(!1),(i=p.current)==null||i.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:S})]});return m.useEffect(()=>{o(l)},[o,l]),m.useEffect(()=>{o(b)},[o,b]),m.useEffect(()=>{A(N),r(N==null?void 0:N.label)},[r,N,A]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,e.jsx(Re,{ref:p}),e.jsxs(De,{value:a??void 0,ref:n,dataKey:"id",header:Oa({dt:n,showModalEdit:c,setSelectedBloco:A}),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:x,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},onSelectionChange:i=>{v(i.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"nome",header:"Nome",sortable:!0,style:{minWidth:"14rem"},body:Ia}),e.jsx(D,{field:"cpf",header:"CPF",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:Ma}),e.jsx(D,{field:"telefone",header:"Contato",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:ka}),e.jsx(D,{field:"proprietario",header:"Proprietário",dataType:"boolean",sortable:!0,bodyClassName:"text-center",style:{minWidth:"1rem"},body:Pa}),e.jsx(D,{field:"unidadeId",header:"Unidade",bodyClassName:"text-center text-color-secondary text-sm",style:{minWidth:"1rem"},body:$a}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:i=>e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{className:"mr-2",pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:k.userIsCondomino()?"Visualizar":"Editar",icon:"pi pi-pencil",size:"small",onClick:u=>{u.preventDefault(),M("/condominos/add/"+i.id,{replace:!0})}}),k.userIsCondomino()?null:e.jsx(T,{pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",onClick:u=>{u.preventDefault(),h(i)}})]})})]}),b&&x&&e.jsx(e.Fragment,{children:e.jsx(ae,{visible:b,style:{width:"450px"},header:"Confirmação",modal:!0,footer:g,onHide:()=>{y(!1)},children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),x&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o item"," ",e.jsx("b",{children:x.nome}),"?"]})]})})})]})})}const _a=({title:a="Condominos"})=>{const[s,t]=m.useState(),[o,r]=m.useState(!1),{state:n,dispatch:p}=z();return m.useEffect(()=>{(async()=>{p({type:"FETCH_DATA_REQUEST"});try{const j=k.getCurrentUserField(le.IdPessoa);let b=[];k.userIsCondomino()?j&&(b=[await Ne.getInstance().getCondominoById(j)]):k.userIsCondomino()?b=[]:b=await Ne.getInstance().getAllCondominos(s),p({type:"FETCH_DATA_ARRAY_SUCCESS",payload:b})}catch(j){p({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+j})}})().then(j=>j)},[p,s,o]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(Ua,{condominos:n.dataArray,loading:n.loading,loadingMessage:n.error,reload:l=>{H(1e3).then(()=>{r(l)})},exportSelectedBloco:l=>{t(l)}})})})})},Ya=({title:a="Mensagens"})=>e.jsx(W,{title:a,children:e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Hi 👋"}),e.jsxs("p",{children:["Can't wait to see what you build!",e.jsx("br",{}),"Happy coding!"]}),e.jsx("p",{className:"text-justify",children:'The standard Lorem Ipsum passage, used since the 1500s `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`"'})]})});function La(){const[a,s]=m.useState(new Date);return m.useEffect(()=>{setInterval(()=>{s(new Date)},1e3)},[]),e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"pi pi-calendar mr-2 text-blue-400"}),e.jsx("span",{children:a.toLocaleDateString("pt-BR",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("i",{className:"pi pi-clock ml-2 mr-2 text-blue-400"}),e.jsx("span",{children:a.toLocaleString("pt-BR",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1})})]})}const ht=({title:a="Dashboard"})=>{const[s,t]=m.useState(),[o,r]=m.useState(0),[n,p]=m.useState([]),[l,j]=m.useState([]),[b,y]=m.useState([]),[x,v]=m.useState([]);m.useEffect(()=>{const c=localStorage.getItem(k.USER_KEY);c&&t(JSON.parse(c))},[]);const N=(s==null?void 0:s.tipo)==="C"||(s==null?void 0:s.tipo)===void 0,A=k.getCurrentUserField(le.IdUnidade),M=k.getCurrentUserField(le.IdCondominio);return m.useEffect(()=>{const c=Oe(_e),h=async()=>{const d=await c.list("usuario");r(d.records.length)},S=async()=>{const d=await c.list("financeiro",{filter:["tipo,eq,RECEITA",`idUnidade,eq,${A}`]});p(d.records)},g=async()=>{const d=await c.list("financeiro",{filter:N?["tipo,eq,DESPESA",`idUnidade,eq,${A}`]:"tipo,eq,DESPESA"});j(d.records)},i=async()=>{const d=await c.list("apartamentosformatados",{filter:N?`value,eq,${A}`:""});y(d.records)},u=async()=>{console.log(s);const d=await c.list("condominiocompleto",{filter:N?`id,eq,${M}`:""});v(d.records)};h().then(d=>d),S().then(d=>d),g().then(d=>d),i().then(d=>d),u().then(d=>d)},[]),e.jsx(e.Fragment,{children:e.jsx(W,{title:a,children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"surface-0 text-center",children:[e.jsxs("div",{className:"mb-1 font-bold text-3xl",children:[e.jsx("span",{className:"text-900",children:"Olá, "}),e.jsx("span",{className:"text-blue-600",children:s==null?void 0:s.nome})]}),e.jsx("div",{className:"mt-2 mb-6 font-semibold",children:e.jsx("span",{children:e.jsx(La,{})})}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"col-12 md:col-4 mb-4 px-5",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-desktop text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:"Último Acesso"}),e.jsx("span",{className:"text-700 line-height-3",children:s!=null&&s.lastLogin?String(new Date(+(s==null?void 0:s.lastLogin)).toLocaleString()):"-"})]}),e.jsxs("div",{className:"col-12 md:col-4 mb-4 px-5",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-user text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:N?"Usuário Logado":"Usuários"}),e.jsxs("span",{className:"text-700 line-height-3",children:[N?"":o,N?e.jsx(e.Fragment,{children:e.jsx("i",{className:"pi text-green-500 pi-check-circle"})}):null]})]}),e.jsxs("div",{className:"col-12 md:col-4 mb-4 px-5",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-arrow-circle-up text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:N?"Valores a Receber":"Receitas"}),e.jsx("span",{className:"text-700 line-height-3",children:n.length})]}),e.jsxs("div",{className:"col-12 md:col-4 mb-4 px-5",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-arrow-circle-down text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:"Despesas"}),e.jsx("span",{className:"text-700 line-height-3",children:l.length})]}),e.jsxs("div",{className:"col-12 md:col-4 mb-4 px-5",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-building text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:"Condomínios"}),e.jsx("span",{className:"text-700 line-height-3",children:x.length})]}),e.jsxs("div",{className:"col-12 md:col-4 md:mb-4 mb-0 px-3",children:[e.jsx("span",{className:"p-3 shadow-2 mb-3 inline-block",style:{borderRadius:"10px"},children:e.jsx("i",{className:"pi pi-table text-4xl text-blue-500"})}),e.jsx("div",{className:"text-900 text-xl mb-3 font-medium",children:"Apartamentos"}),e.jsx("span",{className:"text-700 line-height-3",children:b.length})]})]})]})})})})},xt={uuid:q(),nome:"",email:"",cnpj:void 0,contato:void 0,dataAbertura:"",dataEncerramento:void 0,imagemPerfil:void 0,observacao:void 0,idEndereco:void 0,rua:void 0,numero:void 0,complemento:void 0,bairro:void 0,cidade:void 0,uf:void 0,cep:void 0,pais:void 0},fe=class fe{constructor(){R(this,"getAllCondominios",async(s,t)=>{const o=t?`page=${t.start},${t.end}`:"page=0,100",r=await O({method:"GET",url:s?`${F}/condominiocompleto?filter=idEndereco,eq,${s}&${o}`:`${F}/condominiocompleto?${o}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(r.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar a lista de Condôminios.",cause:r.statusText,details:{errorCode:r.status,additionalInfo:"Failed to fetch data"}});return r.data});R(this,"getCondominioById",async s=>{const t=await O({method:"GET",url:`${F}/condominiocompleto/${s}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar o Condôminio.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"addUpdateCondominio",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/condominio/${s.id}`:`${F}/condominio`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} o Condôminio.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteCondominio",s=>O({method:"DELETE",url:`${F}/condominio/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return fe.instance||(fe.instance=new fe),fe.instance}};R(fe,"instance",null);let ee=fe;const ge=class ge{constructor(){R(this,"getAllEnderecos",async()=>{const s=await O({method:"GET",url:`${F}/endereco?page=0,100`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(s.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os enderecos.",cause:s.statusText,details:{errorCode:s.status,additionalInfo:"Failed to fetch data"}});return s.data});R(this,"getEnderecoFormatado",async(s,t)=>{const o=t?`page=${t.start},${t.end}`:"page=0,100",r=await O({method:"GET",url:s?`${F}/enderecoformatado?filter=id,eq,${s}&${o}`:`${F}/enderecoformatado?${o}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(r.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar o(s) endereço(s).",cause:r.statusText,details:{errorCode:r.status,additionalInfo:"Failed to fetch data"}});return r.data});R(this,"getEnderecoByID",async s=>{const t=await O({method:"GET",url:`${F}/endereco/${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar o endereco.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"getEnderecoByUF",async s=>{const t=await O({method:"GET",url:`${F}/unidade${`?filter=bloco,eq,${s}`}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar o endereco.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"addUpdateEndereco",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/endereco/${s.id}`:`${F}/endereco`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} o Endereco.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteEndereco",s=>O({method:"DELETE",url:`${F}/endereco/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return ge.instance||(ge.instance=new ge),ge.instance}};R(ge,"instance",null);let ce=ge;const Va=/^\d{2}.\d{3}.\d{3}\/\d{4}-\d{2}$/;function za(a=""){if(!a)return!1;const s=typeof a=="string";if(!(s||Number.isInteger(a)||Array.isArray(a)))return!1;if(s){const j=/^\d{14}$/.test(a),b=Va.test(a);if(!(j||b))return!1}const o=qa(a);if(o.length!==14||[...new Set(o)].length===1)return!1;const n=o.slice(12);return ft(12,o)!==n[0]?!1:ft(13,o)===n[1]}function ft(a,s){const t=s.slice(0,a);let o=a-7,r=0;for(let p=a;p>=1;p--){const l=t[a-p];r+=l*o--,o<2&&(o=9)}const n=11-r%11;return n>9?0:n}function qa(a=""){const s=a.toString().match(/\d/g);return Array.isArray(s)?s.map(Number):[]}function gt({id:a,title:s}){const t=z(),o=z(),[r,n]=m.useState(),[p,l]=m.useState(xt),j=m.useRef(null),[,b]=B(),y=k.userIsCondomino(),{control:x,handleSubmit:v,reset:N,formState:{errors:A}}=Fe({mode:"onChange",defaultValues:p,values:p}),M="Este campo é obrigatório.",c=g=>{var i;return A[g]?e.jsx("small",{className:"p-error",children:(i=A[g])==null?void 0:i.message}):null},h=()=>{var g;(g=j.current)==null||g.show({severity:"success",summary:"Sucesso",detail:"Operação realizada com sucesso!"})},S=g=>{var d;console.log("Form Data:",g);const i=p.uuid??q(),u={id:(d=t.state.data)==null?void 0:d.id,uuid:i,nome:g.nome,email:g.email,cnpj:g.cnpj,contato:g.contato,dataAbertura:g.dataAbertura?V(g.dataAbertura):void 0,dataEncerramento:g.dataEncerramento?V(g.dataEncerramento):void 0,observacao:g.observacao,idEndereco:g.idEndereco};try{if(g.imagemPerfil){const f=g.imagemPerfil;if(!Ue(`${Ce}${g.uuid}/${f.name}`)){const I=new File([f],Qe()+"_"+Date.now()+"."+f.name.split(".").pop());u.imagemPerfil=I.name;try{const J={path:"images",file:I,foderName:g.uuid};Ae.getInstance().fileUpload(J).then(console.log)}catch(J){console.log("file_upload_error: ",J)}}}console.log("onSubmit_condominio: ",JSON.stringify(u,null,4)),ee.getInstance().addUpdateCondominio(u).then(f=>{console.log(f)}).catch(f=>{console.log(f)}),h()}catch{console.log(`ERRORS: :-(

`+JSON.stringify(A))}finally{H(100).then(()=>{b("/condominios/list",{replace:!0})})}};return m.useEffect(()=>{(async()=>{t.dispatch({type:"FETCH_DATA_REQUEST"});try{const i=a?await ee.getInstance().getCondominioById(a):null;t.dispatch({type:"FETCH_DATA_SUCCESS",payload:i})}catch(i){t.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${i}`})}})().then(i=>i)},[]),m.useEffect(()=>{(async()=>{o.dispatch({type:"FETCH_DATA_REQUEST"});try{const i=await ce.getInstance().getAllEnderecos();o.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:i})}catch(i){o.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${i}`})}})().then(i=>i)},[t.state.data]),m.useEffect(()=>{const g=async()=>{var u,d;const i=(u=t.state.data)==null?void 0:u.imagemPerfil;if(i)try{const f=await Ke(`${Ce}${(d=t.state.data)==null?void 0:d.uuid}/${i}`);n(f)}catch(f){console.error("Error loading user image:",f)}};t.state.data&&(g().then(i=>i),l({uuid:t.state.data.uuid??q(),nome:t.state.data.nome||"",email:t.state.data.email??void 0,cnpj:t.state.data.cnpj??void 0,contato:t.state.data.contato,dataAbertura:t.state.data.dataAbertura?V(t.state.data.dataAbertura,"DD/MM/YYYY"):"",dataEncerramento:t.state.data.dataEncerramento?V(t.state.data.dataEncerramento,"DD/MM/YYYY"):void 0,imagemPerfil:t.state.data.imagemPerfil??void 0,observacao:t.state.data.observacao??"",idEndereco:t.state.data.idEndereco??void 0,rua:t.state.data.rua??void 0,numero:t.state.data.numero??void 0,complemento:t.state.data.complemento??void 0,bairro:t.state.data.bairro??void 0,cidade:t.state.data.cidade??void 0,uf:t.state.data.uf??void 0,cep:t.state.data.cep??void 0,pais:t.state.data.pais??void 0}))},[t.state.data]),e.jsx(W,{title:s??`${a?"Editar":"Adicionar"} Condômino`,children:e.jsx("div",{className:"card",children:e.jsx("div",{children:t.state.loading?e.jsx("p",{children:"Loading..."}):t.state.error?e.jsx("p",{children:t.state.error}):e.jsx("div",{children:e.jsxs("form",{id:"form1",onSubmit:v(S),children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"nome",children:"Nome"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx(w,{name:"nome",control:x,defaultValue:p.nome,rules:{required:M},render:({field:g,fieldState:i})=>e.jsx(_,{...g,id:g.name,type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":i.error}),value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,nome:u.currentTarget.value})},readOnly:y})})]}),c("nome")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(w,{name:"email",control:x,defaultValue:p.email,rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Endereço de email inválido"}},render:({field:g,fieldState:i})=>e.jsx(_,{...g,id:"email",type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":i.error}),value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,email:u.currentTarget.value})},readOnly:y})})]}),c("email")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"cpf",children:"CNPJ"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-id-card"}),e.jsx(w,{name:"cnpj",control:x,defaultValue:p.cnpj,rules:{validate:g=>(g?za(g):!0)||"CNPJ inválido"},render:({field:g,fieldState:i})=>e.jsx(L,{...g,id:"cnpj",mask:"99.999.999/9999-99",placeholder:"00.000.000/0000-00",autoClear:!1,unmask:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":i.error})}},value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,cnpj:u.currentTarget.value})},readOnly:y})})]}),c("cnpj")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"contato",children:"Contato"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-phone"}),e.jsx(w,{name:"contato",control:x,defaultValue:p.contato,rules:{pattern:{value:/^[0-9]{10,11}$/,message:"Contato inválido"},required:M},render:({field:g,fieldState:i})=>e.jsx(L,{...g,id:"contato",mask:"(99)9999-9999?9",placeholder:"(00)0000-00000",autoClear:!0,unmask:!0,pt:{root:{className:C("p-inputtext-sm","w-full",{"p-invalid":i.error})}},value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,contato:u.currentTarget.value})},readOnly:y})})]}),c("contato")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataAbertura",children:"Data Abertura"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataAbertura",control:x,defaultValue:p.dataAbertura,rules:{pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:g,fieldState:i})=>e.jsx(L,{...g,id:"dataAbertura",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":i.error})}},value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,dataAbertura:u.currentTarget.value})},readOnly:y})})]}),c("dataAbertura")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataEncerramento",children:"Data Encerramento"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataEncerramento",control:x,defaultValue:p.dataEncerramento,rules:{pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:g,fieldState:i})=>e.jsx(L,{...g,id:"dataEncerramento",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":i.error})}},value:g.value,onInput:u=>{g.onChange(u.currentTarget.value),l({...p,dataEncerramento:u.currentTarget.value})},readOnly:y})})]}),c("dataEncerramento")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"idEndereco",children:"Endereço"}),e.jsx(w,{name:"idEndereco",control:x,defaultValue:p.idEndereco,rules:{required:M},render:({field:g,fieldState:i})=>{var u;return e.jsx(e.Fragment,{children:e.jsx(G,{id:"idEndereco",value:g.value,options:(u=o.state.dataArray)==null?void 0:u.map(d=>{var f;return{value:d.id,label:`${d.rua}, ${d.numero}${d.complemento?`. (${d.complemento}). `:""} ${d.bairro}. ${d.cidade}, ${(f=d.uf)==null?void 0:f.toUpperCase()}. ${d.pais}. CEP: ${d.cep}`}}),optionLabel:"label",placeholder:"Selecione o endereço",className:C("p-inputtext-sm w-full",{"p-invalid":i.error}),emptyMessage:o.state.dataArray?"Selecione o endereço!":"Sem resultados",onChange:d=>{g.onChange(d.value),l({...p,idEndereco:d.value})},readOnly:y,disabled:y})})}}),c("idEndereco")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx(w,{name:"imagemPerfil",control:x,defaultValue:p.imagemPerfil,render:({field:g})=>e.jsx(Ze,{label:`Foto${y?"":" (Clique na imagem para selecionar)"}`,disabled:y,selectedImage:r,setSelectedImage:i=>{g.onChange(i),n(i)}})}),c("imagemPerfil")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacoes",children:"Observações"}),e.jsx(w,{name:"observacao",control:x,defaultValue:p.observacao,render:({field:g,fieldState:i})=>e.jsx(de,{id:"observacoes",rows:4,autoResize:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":i.error})}},value:g.value,onChange:u=>{g.onChange(u.currentTarget.value),l({...p,observacao:u.currentTarget.value})},readOnly:y})}),c("observacao")]})]})}),e.jsx("div",{className:"flex align-items-center justify-content-end gap-2",children:k.userIsCondomino()?e.jsxs(e.Fragment,{children:[" ",e.jsx(T,{label:"Retornar",type:"button",severity:"success",icon:"pi pi-arrow-left",onClick:async()=>{await H(100).then(()=>{b("/condominios/list",{replace:!0})})}})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Submit",type:"submit",icon:"pi pi-check"}),e.jsx(T,{label:"Resetar",type:"button",severity:"secondary",icon:"pi pi-refresh",onClick:()=>{N(xt),n(void 0)}}),e.jsx(T,{label:"Cancelar",type:"button",severity:"danger",icon:"pi pi-times",onClick:async()=>{await H(100).then(()=>{b("/condominios/list",{replace:!0})})}})]})})]})})})})})}const Ha=a=>{var t;const s=e.jsx("br",{});return e.jsxs("div",{children:[a.rua,", ",a.numero,".",a.inline?" ":s,a!=null&&a.complemento?(a==null?void 0:a.complemento)+". ":"",a.bairro,a.inline?". ":s,a.cidade,", ",(t=a==null?void 0:a.uf)==null?void 0:t.toUpperCase(),"."," ",a.cep?`CEP: ${kt(a.cep)}`:"",a.inline?". ":s,a==null?void 0:a.pais,"."]})},Ba=a=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{imageAlt:a.nome,image:a.imagemPerfil?Ie(a.imagemPerfil,a.uuid):"",className:"p-mr-2",style:{verticalAlign:"middle"},size:"large",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:a.nome})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:a.email})})]})]})}),Ga=a=>e.jsx(L,{id:"cnpj",mask:"99.999.999/9999-99",placeholder:"00.000.000/0000-00",value:a.cnpj,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}}),Wa=a=>{var s;return e.jsx(L,{id:"telefone",mask:((s=a.contato)==null?void 0:s.length)===11?"(99)99999-9999":"(99)9999-9999",placeholder:"(00)00000-0000",value:a.contato,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}})},Ja=a=>e.jsx(Ha,{inline:!1,rua:a==null?void 0:a.rua,numero:a==null?void 0:a.numero,complemento:a==null?void 0:a.complemento,bairro:a==null?void 0:a.bairro,cidade:a==null?void 0:a.cidade,uf:a==null?void 0:a.uf,cep:a==null?void 0:a.cep,pais:a==null?void 0:a.pais}),Qa=({dt:a,showModalEdit:s})=>{const[,t]=B(),o=()=>{var r;(r=a==null?void 0:a.current)==null||r.exportCSV({selectionOnly:!1})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex align-items-center justify-content-start gap-2",children:e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[k.userIsCondomino()?null:e.jsx(T,{type:"button",label:"Novo",icon:"pi pi-plus",rounded:!0,onClick:r=>{r.preventDefault(),s(),t("/condominios/add",{replace:!0})},"data-pr-tooltip":"Novo",size:"small"}),e.jsx(T,{type:"button",icon:"pi pi-file",severity:"info",label:"CSV",rounded:!0,onClick:()=>{o()},"data-pr-tooltip":"CSV",size:"small"})]})})})};function Ka({condominios:a,loading:s,loadingMessage:t,reload:o}){const r=m.useRef(null),n=m.useRef(null),[p,l]=m.useState(!1),[j,b]=m.useState(!1),[y,x]=m.useState(),[v,N]=m.useState(),[A,M]=m.useState(!1),[,c]=B(),h=u=>{l(!0),x(u)},S=u=>{b(!0),x(u)};function g(){const u={...y};u.id&&ee.getInstance().deleteCondominio(u.id).then(()=>{var d;b(!1),x(void 0),(d=n.current)==null||d.show({severity:"success",summary:"Successo",detail:"Condômino Excluido",life:3e3})}),console.log(`condomino excluido:
`,JSON.stringify(u,null,4)),M(d=>!d)}const i=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var u;b(!1),(u=n.current)==null||u.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:g})]});return m.useEffect(()=>{o(p)},[o,p]),m.useEffect(()=>{o(j)},[o,j]),m.useEffect(()=>{N(v)},[v,N]),m.useEffect(()=>{o(A)},[A,M,o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,e.jsx(Re,{ref:n}),e.jsxs(De,{value:a??void 0,ref:r,dataKey:"id",header:Qa({dt:r,showModalEdit:h}),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:y,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},onSelectionChange:u=>{x(u.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"nome",header:"Nome",sortable:!0,style:{minWidth:"14rem"},body:Ba}),e.jsx(D,{field:"cnpj",header:"CNPJ",bodyClassName:"text-center",style:{maxWidth:"10.5rem"},body:Ga}),e.jsx(D,{field:"telefone",header:"Contato",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:Wa}),e.jsx(D,{field:"enderecoId",header:"Endereço",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:Ja}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:u=>e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{className:"mr-2",pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:k.userIsCondomino()?"Visualizar":"Editar",icon:"pi pi-pencil",size:"small",onClick:d=>{d.preventDefault(),c("/condominios/add/"+u.id,{replace:!0})}}),k.userIsCondomino()?null:e.jsx(T,{pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",onClick:d=>{d.preventDefault(),S(u)}})]})},q())]}),j&&y&&e.jsx(e.Fragment,{children:e.jsx(ae,{visible:j,style:{width:"450px"},header:"Confirmação",modal:!0,footer:i,onHide:()=>{b(!1)},children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),y&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o item"," ",e.jsx("b",{children:y.nome}),"?"]})]})})})]})})}const Za=({title:a="Condomínios"})=>{const[s]=m.useState(),{state:t,dispatch:o}=z(),[r,n]=m.useState(!1);return m.useEffect(()=>{(async()=>{o({type:"FETCH_DATA_REQUEST"});try{const l=k.getCurrentUserField(le.IdCondominio);let j=[];k.userIsCondomino()?l&&(j=[await ee.getInstance().getCondominioById(l)]):k.userIsCondomino()?j=[]:j=await ee.getInstance().getAllCondominios(s),o({type:"FETCH_DATA_ARRAY_SUCCESS",payload:j})}catch(l){o({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+l})}})().then(l=>l)},[o,s,r]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(Ka,{condominios:t.dataArray,loading:t.loading,loadingMessage:t.error,reload:p=>{H(1e3).then(()=>{n(p)})}})})})})},Xa=a=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex  gap-2",children:[a.rua,", ",a.numero]})}),es=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.complemento})}),ts=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.bairro})}),as=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.cidade})}),ss=a=>{var s;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:(s=a.uf)==null?void 0:s.toUpperCase()})})},ns=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:kt(a.cep)})}),os=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.pais})}),is=({dt:a,showModalEdit:s})=>{const[,t]=B(),o=()=>{var r;(r=a==null?void 0:a.current)==null||r.exportCSV({selectionOnly:!1})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center justify-content-start gap-2",children:[e.jsx(T,{type:"button",label:"Novo",icon:"pi pi-plus",rounded:!0,onClick:r=>{r.preventDefault(),s(),t("/enderecos/add",{replace:!0})},"data-pr-tooltip":"Novo",size:"small"}),e.jsx(T,{type:"button",icon:"pi pi-file",severity:"info",label:"CSV",rounded:!0,onClick:()=>{o()},"data-pr-tooltip":"CSV",size:"small"})]})})};function rs({enderecos:a,loading:s,loadingMessage:t,reload:o}){const r=m.useRef(null),[n,p]=m.useState(!1),[l,j]=m.useState(!1),[b,y]=m.useState(),x=m.useRef(null),[v,N]=m.useState(!1),[,A]=B(),M=g=>{p(!0),y(g)},c=g=>{j(g)},h=g=>{var i;g!=null&&g.id?ce.getInstance().deleteEndereco(g.id).then(()=>{var u;c(!1),(u=x.current)==null||u.show({severity:"success",summary:"Successo",detail:"Endereco excluido com sucesso!",life:2e3})}).catch(u=>{var d;(d=x.current)==null||d.show({severity:"error",summary:"Erro",detail:`Endereco não foi excluido! Provavelmente está em uso! ${u.message}`,life:2e3})}):(i=x.current)==null||i.show({severity:"error",summary:"Erro",detail:"Endereco não foi excluido!",life:2e3}),console.log(`financeiro excluido:
`,JSON.stringify(g,null,4)),N(u=>!u)},S=g=>e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var i;c(!1),(i=x.current)==null||i.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:()=>{h(g)}})]});return m.useEffect(()=>{o(v)},[v,N,o]),m.useEffect(()=>{o(n)},[o,n]),m.useEffect(()=>{o(l)},[o,l]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,e.jsx(Re,{ref:x}),e.jsxs(De,{value:a??void 0,ref:r,dataKey:"id",header:is({dt:r,showModalEdit:M}),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:b,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},onSelectionChange:g=>{y(g.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"logradouro",header:"Logradouro",sortable:!0,style:{minWidth:"14rem"},body:Xa}),e.jsx(D,{field:"complemento",header:"Complemento",bodyClassName:"text-center",style:{maxWidth:"10.5rem"},body:es}),e.jsx(D,{field:"Bairro",header:"Bairro",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:ts}),e.jsx(D,{field:"cidade",header:"Município",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:as}),e.jsx(D,{field:"uf",header:"UF",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:ss}),e.jsx(D,{field:"cep",header:"CEP",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:ns}),e.jsx(D,{field:"pais",header:"País",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:os}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:g=>e.jsxs(e.Fragment,{children:[e.jsx(ae,{visible:l,style:{width:"450px"},header:"Confirmação",modal:!0,footer:S(g),onHide:()=>{j(!1)},children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),g&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o endereço:",`
`,e.jsx("b",{children:g.rua+", "+g.numero}),"?"]})]})}),e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{className:"mr-2",pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Editar",icon:"pi pi-pencil",size:"small",onClick:i=>{i.preventDefault(),A("/enderecos/add/"+g.id,{replace:!0})}}),e.jsx(T,{pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",onClick:()=>{c(!0)}})]})]})},q())]})]})})}const jt=({title:a="Enderecos"})=>{const[s]=m.useState(),{state:t,dispatch:o}=z(),[r,n]=m.useState(!1);return m.useEffect(()=>{(async()=>{o({type:"FETCH_DATA_REQUEST"});try{const l=await ce.getInstance().getAllEnderecos();o({type:"FETCH_DATA_ARRAY_SUCCESS",payload:l})}catch(l){o({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+l})}})().then(l=>l)},[o,s,r]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(rs,{enderecos:t.dataArray,loading:t.loading,loadingMessage:t.error,reload:p=>{H(1e3).then(()=>{n(p)})}})})})})},vt={rua:"",numero:"",complemento:void 0,bairro:"",cidade:"",uf:void 0,cep:void 0,pais:void 0},je=class je{constructor(){R(this,"getCep",async s=>{const t=await O({method:"GET",url:`https://opencep.com/v1/${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if((t==null?void 0:t.status)!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao carregar o CEP informado: [${s}].`,cause:t==null?void 0:t.statusText,details:{errorCode:(t==null?void 0:t.status)??-1,additionalInfo:"Failed to fetch data"}});return t.data})}static getInstance(){return je.instance||(je.instance=new je),je.instance}};R(je,"instance",null);let He=je;const ls={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},yt=()=>Object.keys(ls);function ke({id:a,title:s}){const t=z(),[o,r]=m.useState(vt),n=m.useRef(null),[,p]=B(),{control:l,handleSubmit:j,reset:b,formState:{errors:y}}=Fe({mode:"onChange",defaultValues:o,values:o}),x="Este campo é obrigatório.",v=c=>{var h;return y[c]?e.jsx("small",{className:"p-error",children:(h=y[c])==null?void 0:h.message}):null},N=()=>{var c;(c=n.current)==null||c.show({severity:"success",summary:"Sucesso",detail:"Operação realizada com sucesso!"})},A=c=>{var S;console.log("Form Data:",c);const h={id:(S=t.state.data)==null?void 0:S.id,rua:c==null?void 0:c.rua,numero:c==null?void 0:c.numero,complemento:c==null?void 0:c.complemento,bairro:c==null?void 0:c.bairro,cidade:c==null?void 0:c.cidade,uf:c==null?void 0:c.uf,cep:c==null?void 0:c.cep,pais:c==null?void 0:c.pais};try{console.log("onSubmit_condominio: ",JSON.stringify(h,null,4)),ce.getInstance().addUpdateEndereco(h).then(g=>{console.log(g)}).catch(g=>{console.log(g)}),N()}catch{console.log(`ERRORS: :-(

`+JSON.stringify(y))}finally{H(100).then(()=>{p("/enderecos/list",{replace:!0})})}};m.useEffect(()=>{(async()=>{t.dispatch({type:"FETCH_DATA_REQUEST"});try{const h=await ce.getInstance().getEnderecoByID(a??"");t.dispatch({type:"FETCH_DATA_SUCCESS",payload:h})}catch(h){t.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${h}`})}})().then(h=>h)},[]);const M=c=>{try{He.getInstance().getCep(c??"").then(h=>{r({...o,rua:(h==null?void 0:h.logradouro)??o.rua,complemento:h!=null&&h.complemento?(h==null?void 0:h.complemento)+" | "+o.complemento:o.complemento,bairro:(h==null?void 0:h.bairro)??o.bairro,cidade:(h==null?void 0:h.localidade)??o.cidade,uf:(h==null?void 0:h.uf)??o.uf})})}catch(h){console.log(h)}};return m.useEffect(()=>{t.state.data&&r({rua:t.state.data.rua??void 0,numero:t.state.data.numero??void 0,complemento:t.state.data.complemento??void 0,bairro:t.state.data.bairro??void 0,cidade:t.state.data.cidade??void 0,uf:t.state.data.uf??void 0,cep:t.state.data.cep??void 0,pais:t.state.data.pais??void 0})},[t.state.data]),e.jsx(W,{title:s??`${a?"Editar":"Adicionar"} Condômino`,children:e.jsx("div",{className:"card",children:e.jsx("div",{children:t.state.loading?e.jsx("p",{children:"Loading..."}):t.state.error?e.jsx("p",{children:t.state.error}):e.jsx("div",{children:e.jsxs("form",{id:"form1",onSubmit:j(A),children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"rua",children:"Rua"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx(w,{name:"rua",control:l,defaultValue:o.rua,rules:{required:x},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:c.name,type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),r({...o,rua:S.currentTarget.value})}})})]}),v("rua")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"numero",children:"Número"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(w,{name:"numero",control:l,defaultValue:o.numero,rules:{required:x},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"numero",type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),r({...o,numero:S.currentTarget.value})}})})]}),v("numero")]}),e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"complemento",children:"Complemento"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-id-card"}),e.jsx(w,{name:"complemento",control:l,defaultValue:o.complemento,render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"complemento",type:"text",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":h.error})}},value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),r({...o,complemento:S.currentTarget.value})}})})]}),v("complemento")]}),e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"bairro",children:"Bairro"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-phone"}),e.jsx(w,{name:"bairro",control:l,defaultValue:o.bairro,rules:{required:x},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"bairro",type:"text",pt:{root:{className:C("p-inputtext-sm","w-full",{"p-invalid":h.error})}},value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),r({...o,bairro:S.currentTarget.value})}})})]}),v("bairro")]}),e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"cidade",children:"Município"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"cidade",control:l,defaultValue:o.cidade,rules:{required:x},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"cidade",type:"text",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":h.error})}},value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),r({...o,cidade:S.currentTarget.value})}})})]}),v("cidade")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"uf",children:"UF"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"uf",control:l,render:({field:c,fieldState:h})=>e.jsx(e.Fragment,{children:e.jsx(G,{id:"uf",value:c.value,options:yt(),optionLabel:"",placeholder:"Selecione o estado",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),emptyMessage:yt()?"Selecione o estado!":"Sem resultados",onChange:S=>{c.onChange(S.value),r({...o,uf:S.value})}})})})]}),v("uf")]}),e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"cep",children:"CEP"}),e.jsx("div",{className:"p-inputgroup flex-1",children:e.jsx(w,{name:"cep",control:l,defaultValue:o.cep,render:({field:c,fieldState:h})=>e.jsxs(e.Fragment,{children:[e.jsx(_,{...c,id:"cep",type:"text",value:c.value,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":h.error})}},onInput:S=>{S.preventDefault(),c.onChange(S.currentTarget.value),r({...o,cep:S.currentTarget.value})},onBlur:S=>{S.preventDefault(),M(o.cep)}}),e.jsx(T,{icon:"pi pi-search",className:"p-button-warning",onClick:S=>{S.preventDefault(),M(o.cep)}})]})})}),v("cep")]}),e.jsxs("div",{className:"field col-12 md:col-4",children:[e.jsx("label",{htmlFor:"pais",children:"País"}),e.jsx(w,{name:"pais",control:l,defaultValue:o.pais,render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"pais",type:"text",value:c.value,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":h.error})}},onInput:S=>{c.onChange(S.currentTarget.value),r({...o,pais:S.currentTarget.value})}})}),v("pais")]})]})}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[e.jsx(T,{label:"Submit",type:"submit",icon:"pi pi-check"}),e.jsx(T,{label:"Resetar",type:"button",severity:"secondary",icon:"pi pi-refresh",onClick:()=>{b(vt)}}),e.jsx(T,{label:"Cancelar",type:"button",severity:"danger",icon:"pi pi-times",onClick:async()=>{await H(100).then(()=>{p("/enderecos/list",{replace:!0})})}})," "]})]})})})})})}const bt={bloco:"",numero:"",observacao:void 0,idCondominio:void 0};function Ct({id:a,title:s}){const t=z(),o=z(),[r,n]=m.useState(bt),p=m.useRef(null),[,l]=B(),{control:j,handleSubmit:b,reset:y,formState:{errors:x}}=Fe({mode:"onChange",defaultValues:r,values:r}),v="Este campo é obrigatório.",N=c=>{var h;return x[c]?e.jsx("small",{className:"p-error",children:(h=x[c])==null?void 0:h.message}):null},A=()=>{var c;(c=p.current)==null||c.show({severity:"success",summary:"Sucesso",detail:"Operação realizada com sucesso!"})},M=c=>{var S;console.log("Form Data:",c);const h={id:(S=t.state.data)==null?void 0:S.id,bloco:c.bloco,numero:c.numero,observacao:c.observacao,idCondominio:c.idCondominio};try{console.log("onSubmit_unidade: ",JSON.stringify(h,null,4)),ne.getInstance().addUpdateUnidade(h).then(g=>{console.log(g)}).catch(g=>{console.log(g)}),A()}catch{console.log(`ERRORS: :-(

`+JSON.stringify(x))}finally{H(100).then(()=>{l("/unidades/list",{replace:!0})})}};return m.useEffect(()=>{(async()=>{t.dispatch({type:"FETCH_DATA_REQUEST"});try{const h=a?await ne.getInstance().getUnidadeById(a):null;t.dispatch({type:"FETCH_DATA_SUCCESS",payload:h})}catch(h){t.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${h}`})}})().then(h=>h)},[]),m.useEffect(()=>{(async()=>{o.dispatch({type:"FETCH_DATA_REQUEST"});try{const h=await ee.getInstance().getAllCondominios();o.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:h})}catch(h){o.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${h}`})}})().then(h=>h)},[t.state.data]),m.useEffect(()=>{t.state.data&&n({bloco:t.state.data.bloco??"",numero:t.state.data.numero??"",observacao:t.state.data.observacao??void 0,idCondominio:t.state.data.idCondominio??void 0})},[t.state.data]),e.jsx(W,{title:s??`${a?"Editar":"Adicionar"} Condômino`,children:e.jsx("div",{className:"card",children:e.jsx("div",{children:t.state.loading?e.jsx("p",{children:"Loading..."}):t.state.error?e.jsx("p",{children:t.state.error}):e.jsx("div",{children:e.jsxs("form",{id:"form1",onSubmit:b(M),children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"bloco",children:"Bloco"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx(w,{name:"bloco",control:j,defaultValue:r.bloco,rules:{required:v},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:c.name,type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),n({...r,bloco:S.currentTarget.value})}})})]}),N("bloco")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"numero",children:"Número"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(w,{name:"numero",control:j,defaultValue:r.numero,rules:{required:v},render:({field:c,fieldState:h})=>e.jsx(_,{...c,id:"numero",type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),value:c.value,onInput:S=>{c.onChange(S.currentTarget.value),n({...r,numero:S.currentTarget.value})}})})]}),N("numero")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"idCondominio",children:"Condomínio"}),e.jsx(w,{name:"idCondominio",control:j,defaultValue:r.idCondominio,rules:{required:v},render:({field:c,fieldState:h})=>{var S;return e.jsx(e.Fragment,{children:e.jsx(G,{id:"idCondominio",value:c.value,options:(S=o.state.dataArray)==null?void 0:S.map(g=>{var i;return{value:g.id,label:`${g.nome}: ${g.rua}, ${g.numero}. ${g.bairro}. ${g.cidade}, ${(i=g.uf)==null?void 0:i.toUpperCase()}. ${g.pais}. CEP: ${g.cep}`}}),optionLabel:"label",placeholder:"Selecione o condomínio",className:C("p-inputtext-sm w-full",{"p-invalid":h.error}),emptyMessage:o.state.dataArray?"Selecione o condomínio!":"Sem resultados",onChange:g=>{c.onChange(g.value),n({...r,idCondominio:g.value})}})})}}),N("idCondominio")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacoes",children:"Observações"}),e.jsx(w,{name:"observacao",control:j,defaultValue:r.observacao,render:({field:c,fieldState:h})=>e.jsx(de,{id:"observacoes",rows:4,autoResize:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":h.error})}},value:c.value,onChange:S=>{c.onChange(S.currentTarget.value),n({...r,observacao:S.currentTarget.value})}})}),N("observacao")]})]})}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[e.jsx(T,{label:"Submit",type:"submit",icon:"pi pi-check"}),e.jsx(T,{label:"Resetar",type:"button",severity:"secondary",icon:"pi pi-refresh",onClick:()=>{y(bt)}}),e.jsx(T,{label:"Cancelar",type:"button",severity:"danger",icon:"pi pi-times",onClick:async()=>{await H(100).then(()=>{l("/unidades/list",{replace:!0})})}})," "]})]})})})})})}const cs=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.bloco})}),ds=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.numero})}),ms=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.observacao})}),us=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.nomeCondominio})}),ps=({dt:a,showModalEdit:s,setSelectedCondominio:t})=>{const[o,r]=m.useState(),n=z(),[,p]=B(),l=()=>{var j;(j=a==null?void 0:a.current)==null||j.exportCSV({selectionOnly:!1})};return m.useEffect(()=>{(async()=>{n.dispatch({type:"FETCH_DATA_REQUEST"});try{const b=await ee.getInstance().getAllCondominios();n.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:b})}catch(b){n.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${b}`})}})().then(b=>b)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center justify-content-start gap-2",children:[e.jsx(G,{id:"filter-condominio",options:n.state.dataArray??[],optionLabel:"nome",placeholder:"Selecione o Condomínio!",className:C("p-inputtext-sm w-full"),emptyMessage:n.state.dataArray?"Selecione o condomínio!":"Sem resultados",value:o,onChange:j=>{r(j.value),t(j.value)},showClear:!0}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[e.jsx(T,{type:"button",label:"Novo",icon:"pi pi-plus",rounded:!0,onClick:j=>{j.preventDefault(),s(),p("/unidades/add",{replace:!0})},"data-pr-tooltip":"Novo",size:"small"}),e.jsx(T,{type:"button",icon:"pi pi-file",severity:"info",label:"CSV",rounded:!0,onClick:()=>{l()},"data-pr-tooltip":"CSV",size:"small"})]})]})})};function hs({unidades:a,loading:s,loadingMessage:t,reload:o,exportSelectedCondominio:r}){const n=m.useRef(null),p=m.useRef(null),[l,j]=m.useState(!1),[b,y]=m.useState(!1),[x,v]=m.useState(),[N,A]=m.useState(),[M,c]=m.useState(!1),[,h]=B(),S=d=>{j(!0),v(d)},g=d=>{y(!0),v(d)},i=()=>{const d={...x};d.id&&ne.getInstance().deleteUnidade(d.id).then(()=>{var f;y(!1),(f=p.current)==null||f.show({severity:"success",summary:"Successo",detail:"Unidade Excluido",life:3e3})}),console.log(`unidade excluida:
`,JSON.stringify(d,null,4)),c(f=>!f)},u=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var d;y(!1),(d=p.current)==null||d.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:i})]});return m.useEffect(()=>{o(M)},[M,c,o]),m.useEffect(()=>{o(l)},[o,l]),m.useEffect(()=>{o(b)},[o,b]),m.useEffect(()=>{var d;A(N),r((d=N==null?void 0:N.id)==null?void 0:d.toString())},[r,N,A]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,e.jsxs(De,{value:a??void 0,ref:n,dataKey:"id",header:ps({dt:n,showModalEdit:S,setSelectedCondominio:A}),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:x,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},onSelectionChange:d=>{v(d.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"bloco",header:"Bloco",sortable:!0,style:{minWidth:"14rem"},body:cs}),e.jsx(D,{field:"numero",header:"Número",bodyClassName:"text-center",style:{maxWidth:"10.5rem"},body:ds}),e.jsx(D,{field:"observacao",header:"Observação",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:ms}),e.jsx(D,{field:"idCondominio",header:"Condomínio",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:us}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:d=>e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{className:"mr-2",pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Editar",icon:"pi pi-pencil",size:"small",onClick:f=>{f.preventDefault(),h("/unidades/add/"+d.id,{replace:!0})}}),e.jsx(T,{pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",onClick:f=>{f.preventDefault(),g(d)}})]})},q())]}),e.jsx(Re,{ref:p}),b&&x&&e.jsx(e.Fragment,{children:e.jsx(ae,{visible:b,style:{width:"450px"},header:"Confirmação",modal:!0,footer:u,onHide:()=>{y(!1)},children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),x&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o item"," ",e.jsxs("b",{children:["Ap.",x.numero," - Bl.",x.bloco,"."," ",x.nomeCondominio]}),"?"]})]})})})]})})}const xs=({title:a="Unidades"})=>{const[s,t]=m.useState(),{state:o,dispatch:r}=z();return m.useEffect(()=>{(async()=>{r({type:"FETCH_DATA_REQUEST"});try{const p=await ne.getInstance().getAllUnidades(s);r({type:"FETCH_DATA_ARRAY_SUCCESS",payload:p})}catch(p){r({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+p})}})().then(p=>p)},[r,s]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(hs,{unidades:o.dataArray,loading:o.loading,loadingMessage:o.error,reload:n=>n,exportSelectedCondominio:n=>{console.log(n),t(n)}})})})})},Nt={nome:"",uuid:q(),email:"",cpf:void 0,contato:"",dataEntrada:"",dataSaida:void 0,imagemPerfil:void 0,observacao:void 0,tipo:"S",ativo:!0,idCondominio:void 0,idEndereco:void 0},ve=class ve{constructor(){R(this,"getAllSindicos",async(s,t,o)=>{const r=o?`page=${o.start},${o.end}`:"page=0,100",n=await O({method:"GET",url:s?`${F}/sindicoscompleto?filter=idCondominio,eq,${s}&filter=ativo,eq,${t}&${r}`:`${F}/sindicoscompleto?${r}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(n.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar a lista de Síndicos.",cause:n.statusText,details:{errorCode:n.status,additionalInfo:"Failed to fetch data"}});return n.data});R(this,"getSindicoById",async s=>{const t=await O({method:"GET",url:`${F}/sindicoscompleto/${s}`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar o Síndico.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"addUpdateSindico",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/sindico/${s.id}`:`${F}/sindico`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} o Síndico.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteSindico",s=>O({method:"DELETE",url:`${F}/sindico/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return ve.instance||(ve.instance=new ve),ve.instance}};R(ve,"instance",null);let Se=ve;function St({id:a,title:s}){const t=z(),o=z(),r=z(),[n,p]=m.useState(),[l,j]=m.useState(Nt),b=m.useRef(null),[,y]=B(),x=k.userIsCondomino(),{control:v,handleSubmit:N,reset:A,formState:{errors:M}}=Fe({mode:"onChange",defaultValues:l,values:l}),c="Este campo é obrigatório.",h=i=>{var u;return M[i]?e.jsx("small",{className:"p-error",children:(u=M[i])==null?void 0:u.message}):null},S=()=>{var i;(i=b.current)==null||i.show({severity:"success",summary:"Sucesso",detail:"Operação realizada com sucesso!"})},g=i=>{var f;console.log("Form Data:",i);const u=l.uuid??q(),d={id:(f=t.state.data)==null?void 0:f.id,uuid:u,nome:i.nome,email:i.email,cpf:i.cpf,contato:i.contato,dataEntrada:V(i.dataEntrada),dataSaida:i.dataSaida?V(i.dataSaida):void 0,observacao:i.observacao,tipo:i==null?void 0:i.tipo,ativo:i.ativo,idCondominio:i.idCondominio,idEndereco:i.idEndereco};try{if(i.imagemPerfil){const I=i.imagemPerfil;if(!Ue(`${Ce}${i.uuid}/${I.name}`)){const J=new File([I],Qe()+"_"+Date.now()+"."+I.name.split(".").pop());d.imagemPerfil=J.name;try{const Q={path:"images",file:J,foderName:i.uuid};Ae.getInstance().fileUpload(Q).then(console.log)}catch(Q){console.log("file_upload_error: ",Q)}}}console.log("onSubmit_sindico: ",JSON.stringify(d,null,4)),Se.getInstance().addUpdateSindico(d).then(I=>{console.log(I)}).catch(I=>{console.log(I)}),S()}catch{console.log(`ERRORS: :-(

`+JSON.stringify(M))}finally{H(100).then(()=>{y("/sindicos/list",{replace:!0})})}};return m.useEffect(()=>{const i=async()=>{t.dispatch({type:"FETCH_DATA_REQUEST"});try{const f=a?await Se.getInstance().getSindicoById(a):null;t.dispatch({type:"FETCH_DATA_SUCCESS",payload:f})}catch(f){t.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${f}`})}},u=async()=>{o.dispatch({type:"FETCH_DATA_REQUEST"});try{const f=await ee.getInstance().getAllCondominios();o.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:f})}catch(f){o.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${f}`})}},d=async()=>{r.dispatch({type:"FETCH_DATA_REQUEST"});try{const f=await ce.getInstance().getEnderecoFormatado();r.dispatch({type:"FETCH_DATA_ARRAY_SUCCESS",payload:f})}catch(f){r.dispatch({type:"FETCH_DATA_FAILURE",payload:`error fetching data: ${f}`})}};i().then(f=>f),u().then(f=>f),d().then(f=>f)},[]),m.useEffect(()=>{const i=async()=>{var d,f;const u=(d=t.state.data)==null?void 0:d.imagemPerfil;if(u)try{const I=await Ke(`${Ce}${(f=t.state.data)==null?void 0:f.uuid}/${u}`);p(I)}catch(I){console.error("Error loading sindico image:",I)}};t.state.data&&(i().then(u=>u),j({uuid:t.state.data.uuid??q(),nome:t.state.data.nome||"",email:t.state.data.email??void 0,cpf:t.state.data.cpf??void 0,contato:t.state.data.contato||"",dataEntrada:t.state.data.dataEntrada?V(t.state.data.dataEntrada,"DD/MM/YYYY"):"",dataSaida:t.state.data.dataSaida?V(t.state.data.dataSaida,"DD/MM/YYYY"):void 0,imagemPerfil:t.state.data.imagemPerfil??void 0,observacao:t.state.data.observacao??"",tipo:"S",ativo:t.state.data.ativo||!1,idCondominio:t.state.data.idCondominio??void 0,idEndereco:t.state.data.idEndereco??void 0}))},[t.state.data]),e.jsx(W,{title:s??`${a?"Editar":"Adicionar"} Condômino`,children:e.jsx("div",{className:"card",children:e.jsx("div",{children:t.state.loading?e.jsx("p",{children:"Loading..."}):t.state.error?e.jsx("p",{children:t.state.error}):e.jsx("div",{children:e.jsxs("form",{id:"form1",onSubmit:N(g),children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"nome",children:"Nome"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx(w,{name:"nome",control:v,defaultValue:l.nome,rules:{required:c},render:({field:i,fieldState:u})=>e.jsx(_,{...i,id:i.name,type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("nome")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(w,{name:"email",control:v,defaultValue:l.email,rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Endereço de email inválido"}},render:({field:i,fieldState:u})=>e.jsx(_,{...i,id:"email",type:"text",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("email")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"cpf",children:"CPF"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-id-card"}),e.jsx(w,{name:"cpf",control:v,defaultValue:l.cpf,rules:{validate:i=>(i?Mt(i):!0)||"CPF inválido"},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"cpf",mask:"999.999.999-99",placeholder:"000.000.000-00",autoClear:!1,unmask:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("cpf")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"contato",children:"Contato"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-phone"}),e.jsx(w,{name:"contato",control:v,defaultValue:l.contato,rules:{pattern:{value:/^[0-9]{10,11}$/,message:"Contato inválido"},required:c},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"contato",mask:"(99)9999-9999?9",placeholder:"(00)0000-00000",autoClear:!0,unmask:!0,pt:{root:{className:C("p-inputtext-sm","w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("contato")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataEntrada",children:"Data Entrada"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataEntrada",control:v,defaultValue:l.dataEntrada,rules:{required:c,pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"dataEntrada",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("dataEntrada")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"dataSaida",children:"Data Saída"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsx(w,{name:"dataSaida",control:v,defaultValue:l.dataSaida,rules:{pattern:{value:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,message:"Formato de data inválido"}},render:({field:i,fieldState:u})=>e.jsx(L,{...i,id:"dataSaida",mask:"99/99/9999",placeholder:"DD/MM/YYYY",slotChar:"DD/MM/YYYY",autoClear:!0,unmask:!1,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onInput:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})})]}),h("dataSaida")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"bloco",children:"Condomínio"}),e.jsx(w,{name:"idCondominio",control:v,defaultValue:l.idCondominio,rules:{required:c},render:({field:i,fieldState:u})=>{var d;return e.jsx(G,{id:"idCondominio",options:(d=o.state.dataArray)==null?void 0:d.map(f=>({value:f.id,label:f.nome})),optionLabel:"label",placeholder:"Selecione",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),emptyMessage:o.state.dataArray?"Selecione o condomínio!":"Sem resultados",value:i.value,onChange:f=>{f.preventDefault(),i.onChange(f.value)},disabled:x})}}),h("idCondominio")]}),e.jsxs("div",{className:"field col-12 md:col-3",children:[e.jsx("label",{htmlFor:"idEndereco",children:"Endereço"}),e.jsx(w,{name:"idEndereco",control:v,defaultValue:l.idEndereco,rules:{required:c},render:({field:i,fieldState:u})=>{var d,f;return e.jsx(G,{id:"idEndereco",options:(d=r.state.dataArray)==null?void 0:d.map(I=>({value:I.id,label:I.endereco})),defaultValue:i.value,optionLabel:"label",placeholder:"Selecione",className:C("p-inputtext-sm w-full",{"p-invalid":u.error}),emptyMessage:(f=r.state.dataArray)!=null&&f.length?"Selecione o endereço!":"Sem resultados",value:i.value,onChange:I=>{I.preventDefault(),i.onChange(I.value)},disabled:x})}}),h("idEndereco")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"ativo",children:"Está ativo?"}),e.jsx("div",{children:e.jsx(w,{name:"ativo",control:v,defaultValue:l.ativo,render:({field:i,fieldState:u})=>e.jsx(Rt,{id:"ativo",className:C("p-inputtext-sm",{"p-invalid":u.error}),checked:i.value,onChange:d=>{d.preventDefault(),i.onChange(d.value)},disabled:x})})}),h("ativo")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx(w,{name:"imagemPerfil",control:v,defaultValue:l.imagemPerfil,render:({field:i})=>e.jsx(Ze,{label:`Foto${x?"":" (Clique na imagem para selecionar)"}`,disabled:x,selectedImage:n,setSelectedImage:u=>{i.onChange(u),p(u)}})}),h("imagemPerfil")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacoes",children:"Observações"}),e.jsx(w,{name:"observacao",control:v,defaultValue:l.observacao,render:({field:i,fieldState:u})=>e.jsx(de,{id:"observacoes",rows:4,autoResize:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":u.error})}},value:i.value,onChange:d=>{d.preventDefault(),i.onChange(d.currentTarget.value)},readOnly:x})}),h("observacao")]})]})}),e.jsx("div",{className:"flex align-items-center justify-content-end gap-2",children:k.userIsCondomino()?e.jsxs(e.Fragment,{children:[" ",e.jsx(T,{label:"Retornar",type:"button",severity:"success",icon:"pi pi-arrow-left",onClick:async()=>{await H(100).then(()=>{y("/condominios/list",{replace:!0})})}})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Submit",type:"submit",icon:"pi pi-check"}),e.jsx(T,{label:"Resetar",type:"button",severity:"secondary",icon:"pi pi-refresh",onClick:()=>{A(Nt),p(void 0)}}),e.jsx(T,{label:"Cancelar",type:"button",severity:"danger",icon:"pi pi-times",onClick:async()=>{await H(100).then(()=>{y("/condominos/list",{replace:!0})})}})," "]})})]})})})})})}const fs=a=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{imageAlt:a.nome,image:Ie(a.imagemPerfil,a.uuid),className:"p-mr-2",style:{verticalAlign:"middle"},size:"large",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:a.nome})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:a.email})})]})]})}),gs=a=>e.jsx("i",{className:C("pi",{"text-green-500 pi-check-circle":a.ativo,"text-pink-500 pi-times-circle":!a.ativo})}),js=a=>e.jsx(L,{id:"cpf",mask:"999.999.999-99",placeholder:"000.000.000-00",value:a.cpf,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}}),vs=a=>e.jsx(L,{id:"telefone",mask:a.contato.length===11?"(99)99999-9999":"(99)9999-9999",placeholder:"(00)00000-0000",value:a.contato,autoClear:!1,disabled:!0,readOnly:!0,unmask:!0,pt:{root:{className:C("border-none","pl-0")}}}),ys=a=>e.jsx("div",{children:a==null?void 0:a.nomeCondominio}),bs=({dt:a,showModalEdit:s,setSelectedCondominio:t})=>{const[o,r]=m.useState([]),[n,p]=m.useState(),[l,j]=m.useState(""),[,b]=B(),y=()=>{var v;(v=a==null?void 0:a.current)==null||v.exportCSV({selectionOnly:!1})},x=()=>{j("Carregando..."),ee.getInstance().getAllCondominios().then(v=>{j(""),r(v)}).catch(v=>{j("Erro: "+v.message),console.log("ERROR: ",l)})};return We(()=>{x()}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex align-items-center justify-content-start gap-2",children:[k.userIsCondomino()?null:e.jsx(G,{id:"filter-condominio",options:o,optionLabel:"nome",placeholder:"Selecione o Condomínio!",className:C("p-inputtext-sm w-full"),emptyMessage:o?"Selecione o condominio!":"Sem resultados",value:n,onChange:v=>{p(v.value),t(v.value)},showClear:!0}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2",children:[k.userIsCondomino()?null:e.jsx(T,{type:"button",label:"Novo",icon:"pi pi-plus",rounded:!0,onClick:v=>{v.preventDefault(),s(),b("/sindicos/add",{replace:!0})},"data-pr-tooltip":"Novo",size:"small"}),e.jsx(T,{type:"button",icon:"pi pi-file",severity:"info",label:"CSV",rounded:!0,onClick:()=>{y()},"data-pr-tooltip":"CSV",size:"small"})]})]})})};function Cs({sindicos:a,loading:s,loadingMessage:t,reload:o,exportSelectedCondominio:r}){const n=m.useRef(null),p=m.useRef(null),[l,j]=m.useState(!1),[b,y]=m.useState(!1),[x,v]=m.useState(),[N,A]=m.useState(),[M,c]=m.useState(!1),[,h]=B(),S=d=>{j(!0),v(d)},g=d=>{y(!0),v(d)},i=()=>{const d={...x};d.id&&Se.getInstance().deleteSindico(d.id).then(()=>{var f;y(!1),(f=p.current)==null||f.show({severity:"success",summary:"Successo",detail:"Síndico Excluido",life:3e3})}),console.log(`sindico excluido:
`,JSON.stringify(d,null,4)),c(f=>!f)},u=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var d;y(!1),(d=p.current)==null||d.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:i})]});return m.useEffect(()=>{o(M)},[M,c,o]),m.useEffect(()=>{o(l)},[o,l]),m.useEffect(()=>{o(b)},[o,b]),m.useEffect(()=>{var d;A(N),r((d=N==null?void 0:N.id)==null?void 0:d.toString())},[r,N,A]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,e.jsxs(De,{value:a??void 0,ref:n,dataKey:"id",header:bs({dt:n,showModalEdit:S,setSelectedCondominio:A}),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:x,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},onSelectionChange:d=>{v(d.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"nome",header:"Nome",sortable:!0,style:{minWidth:"14rem"},body:fs}),e.jsx(D,{field:"cpf",header:"CPF",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:js}),e.jsx(D,{field:"telefone",header:"Contato",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:vs}),e.jsx(D,{field:"ativo",header:"Ativo",dataType:"boolean",sortable:!0,bodyClassName:"text-center",style:{minWidth:"1rem"},body:gs}),e.jsx(D,{field:"condominioID",header:"Condomínio",bodyClassName:"text-center text-color-secondary text-sm",style:{minWidth:"1rem"},body:ys}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:d=>e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{className:"mr-2",pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:k.userIsCondomino()?"Visualizar":"Editar",icon:"pi pi-pencil",size:"small",onClick:f=>{f.preventDefault(),h("/sindicos/add/"+d.id,{replace:!0})}}),k.userIsCondomino()?null:e.jsx(T,{pt:{root:{style:{fontSize:"0.75rem",padding:"0.4rem"}}},label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",onClick:f=>{f.preventDefault(),g(d)}})]})})]}),e.jsx(Re,{ref:p}),b&&x&&e.jsx(e.Fragment,{children:e.jsx(ae,{visible:b,style:{width:"450px"},header:"Confirmação",modal:!0,footer:u,onHide:()=>{y(!1)},children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),x&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o item"," ",e.jsx("b",{children:x.nome}),"?"]})]})})})]})})}const Ns=({title:a="Síndicos"})=>{const[s,t]=m.useState(),{state:o,dispatch:r}=z(),[n,p]=m.useState(!1);return m.useEffect(()=>{(async()=>{r({type:"FETCH_DATA_REQUEST"});try{const j=k.getCurrentUserField(le.IdCondominio);let b=[];k.userIsCondomino()?j&&(b=await Se.getInstance().getAllSindicos(j,1)):k.userIsCondomino()?b=[]:b=await Se.getInstance().getAllSindicos(s),r({type:"FETCH_DATA_ARRAY_SUCCESS",payload:b})}catch(j){r({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+j})}})().then(j=>j)},[r,s,n]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(Cs,{sindicos:o.dataArray,loading:o.loading,loadingMessage:o.error,reload:l=>{H(1e3).then(()=>{p(l)})},exportSelectedCondominio:l=>{t(l)}})})})})},Ss="/sgco/app/assets/SGCO.2-transparente-e1409c5f.png";function Et(){const[a,s]=m.useState(!1),[t,o]=m.useState(),[r,n]=m.useState(""),[p,l]=m.useState(""),[,j]=B();function b(y){function x(){window.location.reload()}H(500).then(()=>{y&&j("/dashboard",{replace:!0}),x()})}return e.jsx("div",{className:"block-content border-round-3xl surface-card shadow-6 m-2 w-full lg:w-30rem md:w-30rem",children:e.jsx("div",{className:"flex align-items-center justify-content-center gap-2 border-round-3xl surface-card",children:e.jsxs("div",{className:"surface-card p-4 border-round-3xl w-full",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("img",{src:Ss,alt:"logo image",height:90,className:"mb-1"}),e.jsx("div",{className:"text-900 text-3xl font-medium mb-1",children:"Bem vindo!"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-900 font-medium mb-2",children:"Email"}),e.jsx(_,{id:"username",type:"text",autoComplete:"username",placeholder:"Usuário",className:"w-full mb-3",onInput:y=>{n(y.currentTarget.value)}}),e.jsx("label",{htmlFor:"password",className:"block text-900 font-medium mb-2",children:"Senha"}),e.jsx(_,{id:"password",type:"password",autoComplete:"current-password",placeholder:"Password",className:"w-full mb-2",onInput:y=>{l(y.currentTarget.value)}}),e.jsx("div",{className:C({"mb-3 text-red-400 text-xs":{statusMessage:t}})}),e.jsxs("div",{className:"flex align-items-center justify-content-between mb-3",children:[e.jsxs("div",{className:"flex align-items-center",children:[e.jsx(ma,{id:"rememberme",onChange:y=>{s(y.checked??!1)},checked:a,className:"mr-2"}),e.jsx("label",{htmlFor:"rememberme",children:"Lembrar login"})]}),e.jsx("a",{className:"font-medium no-underline ml-2 text-blue-500 text-right cursor-pointer",children:"Esqueceu sua senha?"})]}),e.jsx("div",{className:"flex align-items-center justify-content-center mb-4",children:e.jsxs("div",{className:"flex align-items-center",children:[e.jsxs("span",{className:"text-600 font-medium line-height-3 text-xs",children:[e.jsx("b",{children:"*"})," Não possui cadastro?"]}),e.jsx("a",{className:"font-medium no-underline ml-2 text-blue-500 text-xs cursor-pointer",children:"Solicite aqui seu registro!"})]})}),e.jsx(T,{label:"Entrar",icon:"pi pi-user",className:"w-full",onClick:()=>{k.login(r,p).then(y=>{o(y?void 0:"Usuário e/ou senha inválidos!"),b(y)})}})]})]})})})}const Es=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex align-items-center gap-2",children:e.jsx(_,{id:"titulo_table",type:"text",value:a.titulo,disabled:!0,readOnly:!0,pt:{root:{className:C("border-none","p-0")}}})})}),Ts=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:e.jsx(Je,{id:"valor",value:a.valor,mode:"currency",currency:"BRL",locale:"pt-BR",minFractionDigits:2,disabled:!0,readOnly:!0,pt:{root:{className:C("border-none","p-0")},input:{root:{className:C("border-none","p-0")}}}})})}),As=a=>e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(L,{id:"dataVencimento",mask:"99/99/9999",placeholder:"00/00/0000",value:a!=null&&a.dataVencimento?V(a==null?void 0:a.dataVencimento,"DD/MM/YYYY"):void 0,disabled:!0,readOnly:!0,pt:{root:{className:C("border-none","p-0")}}})})}),Fs=a=>e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(L,{id:"dataPagamento",mask:"99/99/9999",placeholder:"00/00/0000",value:a!=null&&a.dataPagamento?V(a==null?void 0:a.dataPagamento,"DD/MM/YYYY"):void 0,disabled:!0,readOnly:!0,pt:{root:{className:C("border-none","p-0")}}})})}),ws=a=>e.jsx(e.Fragment,{children:e.jsx(ua,{severity:a.statusFinanceiro==="PAGO"?"success":a.statusFinanceiro==="PENDENTE"?"danger":"warning",rounded:!0,children:e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("i",{className:C("pi","text-xs",{"pi-check-circle":a.statusFinanceiro==="PAGO","pi-times-circle":a.statusFinanceiro==="PENDENTE","pi-eye":a.statusFinanceiro==="ANALISE"})}),e.jsxs("span",{className:"text-xs",children:[" ",a.statusFinanceiro]})]})})}),Rs=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.tipo})}),Ds=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.observacao})}),Is=a=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex gap-2",children:a.idUnidade})}),Ps=(a,s,t,o)=>{const r=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"my-2",children:k.userIsCondomino()?null:e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Novo",icon:"pi pi-plus",severity:"success",size:"small",rounded:!0,className:" mr-2",onClick:t}),e.jsx(T,{label:"Excluir",icon:"pi pi-trash",severity:"danger",size:"small",rounded:!0,disabled:!a||!a.length,onClick:o})]})})}),n=()=>{const p=()=>{var l;(l=s.current)==null||l.exportCSV({selectionOnly:!(a.length>1)})};return e.jsx(e.Fragment,{children:e.jsx(T,{label:"Exportar CSV",icon:"pi pi-upload",severity:"help",size:"small",rounded:!0,onClick:()=>{p()}})})};return e.jsx(pa,{className:"mb-4",start:r,end:n})},ye=class ye{constructor(){R(this,"getAllFinanceiroData",async s=>{const t=await O({method:"GET",url:s?`${F}/financeiro?filter=anoCalendario,eq,${s}`:`${F}/financeiro?page=0,100`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os dados.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"getFinanceiroByID",async s=>{const t=await O({method:"GET",url:`${F}/financeiro/${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(t.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar os dados.",cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"getFinanceiroByStatus",async(s,t)=>{const o=await O({method:"GET",url:t?`${F}/financeiro?filter=status,eq,${s}&filter=anoCalendario,eq,${t}`:`${F}/financeiro?filter=status,eq,${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(o.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar os dados.",cause:o.statusText,details:{errorCode:o.status,additionalInfo:"Failed to fetch data"}});return o.data});R(this,"getFinanceiroByTipo",async(s,t)=>{const o=await O({method:"GET",url:t?`${F}/financeiro?filter=tipo,eq,${s}&filter=anoCalendario,eq,${t}`:`${F}/financeiro?filter=tipo,eq,${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(o.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar os dados.",cause:o.statusText,details:{errorCode:o.status,additionalInfo:"Failed to fetch data"}});return o.data});R(this,"getFinanceiroMensalidade",async(s,t,o)=>{const r=o?`page=${o.start},${o.end}`:"page=0,100",n=await O({method:"GET",url:t?`${F}/financeiro?filter=idUnidade,eq,${s}&filter=anoCalendario,eq,${t}`:s?`${F}/financeiro?filter=idUnidade,eq,${s}&${r}`:`${F}/mensalidade?${r}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(n.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar os dados.",cause:n.statusText,details:{errorCode:n.status,additionalInfo:"Failed to fetch data"}});return n.data});R(this,"getFinanceiroByUnidade",async(s,t)=>{const o=await O({method:"GET",url:t?`${F}/financeiro?filter=idUnidade,eq,${s}&filter=anoCalendario,eq,${t}`:`${F}/financeiro?filter=idUnidade,eq,${s}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(o.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao localizar os dados.",cause:o.statusText,details:{errorCode:o.status,additionalInfo:"Failed to fetch data"}});return o.data});R(this,"addUpdateFinanceiro",async s=>{const t=await O({method:s.id?"PUT":"POST",url:s.id?`${F}/financeiro/${s.id}`:`${F}/financeiro`,params:{},headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:s});if(t.status!==200)throw console.log(t.status),console.log(t),new Y({name:"GET_ERROR",message:`Ocorreu um erro ao ${s.id?"atualizar":"salvar"} o Financeiro.`,cause:t.statusText,details:{errorCode:t.status,additionalInfo:"Failed to fetch data"}});return t.data});R(this,"deleteFinanceiro",async s=>await O({method:"DELETE",url:`${F}/financeiro/${s}`,params:{},headers:{"Content-Type":"application/json"}}))}static getInstance(){return ye.instance||(ye.instance=new ye),ye.instance}};R(ye,"instance",null);let se=ye;function Ms({financeirosData:a,loading:s,loadingMessage:t,tipo:o,exportAnoCalendario:r,reload:n}){const p={uuid:q(),titulo:"",valor:0,dataVencimento:"",tipo:o},l=m.useRef(null),j=m.useRef(null),b=m.useRef(null),[y,x]=m.useState(),[v,N]=m.useState(""),[,A]=m.useState(!1),[M,c]=m.useState(!1),[h,S]=m.useState(!1),[g,i]=m.useState(!1),[u,d]=m.useState([]),[f,I]=m.useState(p),[J,Q]=m.useState([]),[Pe,Ot]=m.useState(),[Ve,ze]=m.useState(),[et,Ye]=m.useState(!1),me=k.userIsCondomino(),{control:oe,handleSubmit:Ut,formState:{errors:tt}}=Fe({mode:"onChange",defaultValues:p,values:f}),ie=E=>{var $;return tt[E]?e.jsx("small",{className:"p-error",children:($=tt[E])==null?void 0:$.message}):null},Me="Este campo é obrigatório.",_t=()=>{I(p),A(!1),c(!0)},at=()=>{A(!1),c(!1)},st=()=>{S(!1)},nt=()=>{i(!1)},Yt=E=>{I(E),c(!0)},Lt=E=>{I(E),S(!0)},Vt=()=>{i(!0)},zt=()=>{const E={...f};E.id&&se.getInstance().deleteFinanceiro(E.id).then(()=>{var $;S(!1),I(p),($=b.current)==null||$.show({severity:"success",summary:"Successo",detail:"Financeiro Excluido",life:3e3})}),console.log(`financeiro excluido:
`,JSON.stringify(E,null,4)),Ye($=>!$)},qt=()=>{var $,P;const E=[...u];if(E){const Z=[];E.forEach(te=>{if(te.id)return Z.push(te.id)}),Z.length?se.getInstance().deleteFinanceiro(Z).then(()=>{var te;i(!1),(te=b.current)==null||te.show({severity:"success",summary:"Successo",detail:"Financeiros Excluidos",life:3e3})}):($=b.current)==null||$.show({severity:"error",summary:"Erro",detail:"Seleção vazia!",life:3e3})}else(P=b.current)==null||P.show({severity:"error",summary:"Erro",detail:"Seleção inválida!",life:3e3});Ye(Z=>!Z)},Ht=E=>{const $=f.uuid??q(),P=[...u],Z=V(E.dataVencimento),te=E.dataPagamento?V(E.dataPagamento):void 0;let X={...E,id:f==null?void 0:f.id,uuid:$,anoCalendario:$e(),dataVencimento:Z,dataPagamento:te};try{if(Pe){const K=new File([Pe[0]],Date.now()+"_"+Pe[0].name);X={...X,comprovante:K.name},I(X);const Le={path:"archives",file:K,foderName:$};Ae.getInstance().fileUpload(Le).then(console.log)}}catch(K){console.log("file_upload_error: ",K)}I(X),se.getInstance().addUpdateFinanceiro(X).then(()=>{var K,Le;if(f.id){const ot=Bt(f.id);P[ot]=X,(K=b.current)==null||K.show({severity:"success",summary:"Successful",detail:"Financeiro Atualizado",life:3e3})}else P.push(X),(Le=b.current)==null||Le.show({severity:"success",summary:"Successful",detail:"Financeiro Criado",life:3e3});d(P),c(!1),I(p),A(!0)}),Ye(K=>!K),console.log(`financeiro:
`,JSON.stringify(X,null,4))},Bt=E=>{let $=-1;for(let P=0;P<(u==null?void 0:u.length);P++)if(u[P].id===E){$=P;break}return $},Gt=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var E;st(),(E=b.current)==null||E.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:zt})]}),Wt=e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Não",icon:"pi pi-times",severity:"info",onClick:()=>{var E;nt(),(E=b.current)==null||E.show({severity:"info",summary:"Cancelado",detail:"Ação cancelada!",life:3e3})}}),e.jsx(T,{label:"Sim",icon:"pi pi-check",severity:"danger",onClick:qt})]}),Jt=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",children:[e.jsxs("h5",{className:"m-0",children:["Gerenciar ",o?ct(o.toLowerCase()):"Mensalidade","s"]}),e.jsxs("span",{className:"block mt-2 md:mt-0 p-input-icon-left ml-2",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(G,{id:"tipo",value:Ve??$e(),options:It(),optionLabel:"",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm","w-full")}},onChange:E=>{E.preventDefault(),ze(E.value)}})]}),e.jsxs("span",{className:"block mt-2 md:mt-0 p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(_,{type:"search",onInput:E=>{N(E.currentTarget.value)},placeholder:"Pesquisar..."})]})]}),e.jsx("div",{})]}),Qt=()=>e.jsx(e.Fragment,{children:f.uuid&&f.comprovante&&Ue(`${lt}${f.uuid}/${f.comprovante}`)&&e.jsx("a",{href:`${lt}${f.uuid}/${f.comprovante}`,target:"_blank",rel:"noreferrer",children:f.comprovante})});return m.useEffect(()=>{const E=Oe(_e);(async()=>{const P=await E.list("apartamentosformatados");Q(P.records)})().then(P=>P),ze($e())},[]),m.useEffect(()=>{n(et)},[et,Ye,n]),m.useEffect(()=>{r(Ve)},[Ve,ze,r]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[s?e.jsxs("div",{className:"spinner-wrapper",children:[t,e.jsx(we,{"aria-label":"Loading",style:{width:"40px",height:"40px",position:"absolute"},pt:{spinner:{style:{animationDuration:".5s"}},circle:{style:{stroke:"#2E0357",strokeWidth:2,animation:"none"}}}})]}):null,Ps(y,l,_t,Vt),e.jsx(Re,{ref:b}),e.jsxs(De,{value:a??void 0,ref:l,dataKey:"id",header:Jt(),columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,stripedRows:!0,size:"small",selectionMode:"single",dragSelection:!0,selection:y,showSelectAll:!0,paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} registro(s)",globalFilter:v,emptyMessage:"Nenhum registro encontrado.",rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},className:"datatable-responsive",scrollable:!0,scrollHeight:"400px",onSelectionChange:E=>{x(E.value),E.value.length>1&&d(E.value)},children:[e.jsx(D,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(D,{field:"id",header:"ID",sortable:!0,bodyClassName:"text-center text-color-secondary text-sm",style:{maxWidth:"4rem"}}),e.jsx(D,{field:"titulo",header:"Título",sortable:!0,style:{minWidth:"14rem"},bodyClassName:"text-color-secondary text-sm",body:Es}),e.jsx(D,{field:"valor",header:"Valor",bodyClassName:"text-center",style:{maxWidth:"6.5rem"},body:Ts}),e.jsx(D,{field:"dataVencimento",header:"Vencimento",bodyClassName:"text-center",style:{maxWidth:"8.5rem"},body:As}),e.jsx(D,{field:"dataPagamento",header:"Pagamento",bodyClassName:"text-color-secondary text-sm",style:{maxWidth:"8.5rem"},body:Fs}),e.jsx(D,{field:"statusFinanceiro",header:"Status",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:ws}),!k.userIsCondomino()&&e.jsx(D,{field:"tipo",header:"Tipo",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:Rs}),e.jsx(D,{field:"observacao",header:"Observações",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:Ds}),e.jsx(D,{field:"unidade",header:"Unidade",bodyClassName:"text-color-secondary text-sm",style:{minWidth:"1rem"},body:Is}),e.jsx(D,{header:"Ações",bodyClassName:"text-center",body:E=>e.jsxs("span",{className:"p-buttonset",children:[e.jsx(T,{icon:`pi ${k.userIsCondomino()?"pi-eye":"pi-pencil"}`,size:"small",rounded:!0,className:"mr-2",onClick:$=>{$.preventDefault(),Yt(E)}}),k.userIsCondomino()?null:e.jsx(T,{icon:"pi pi-trash",severity:"danger",size:"small",rounded:!0,onClick:$=>{$.preventDefault(),Lt(E)}})]})},q())]}),e.jsxs("div",{className:"card flex justify-content-center",children:[e.jsx(ae,{visible:M,style:{width:"50vw",marginLeft:"10%",marginRight:"10%"},breakpoints:{"960px":"75vw","641px":"100vw"},contentStyle:{width:"auto",height:"auto",padding:"0 1.5rem"},headerStyle:{width:"auto",height:"auto",padding:"1.5rem 1.5rem 0rem"},header:me&&!o?"Informar Pagamento":f.id?"Editar":"Nova "+ct(o?o.toLowerCase():""),modal:!0,maximizable:!0,className:"p-fluid",onHide:at,children:e.jsx("form",{id:"form1",onSubmit:Ut(Ht),children:e.jsx("div",{className:"pt-4 ml-4 mr-4",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"titulo",children:"Título"}),e.jsx(w,{name:"titulo",control:oe,defaultValue:f.titulo,rules:{required:Me},render:({field:E,fieldState:$})=>e.jsx(_,{...E,id:"titulo",type:"text",value:E.value,autoFocus:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onInput:P=>{P.preventDefault(),E.onChange(P)},disabled:me})}),ie("titulo")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"valor",children:"Valor"}),e.jsx(w,{name:"valor",control:oe,defaultValue:f.valor,rules:{required:Me},render:({field:E,fieldState:$})=>e.jsx(Je,{id:"valor",value:E.value,mode:"currency",currency:"BRL",locale:"pt-BR",minFractionDigits:2,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onValueChange:P=>{P.preventDefault(),E.onChange(P)},disabled:me})}),ie("valor")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"dataVencimento",children:"Vencimento"}),e.jsx(w,{name:"dataVencimento",control:oe,defaultValue:V(f.dataVencimento,"DD/MM/YYYY"),rules:{required:Me},render:({field:E,fieldState:$})=>e.jsx(e.Fragment,{children:e.jsx(Te,{...E,id:"dataVencimento",value:new Date(Date.parse(E.value)),mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",showIcon:!0,showButtonBar:!0,pt:{input:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}}},onChange:P=>{P.preventDefault(),P.value?E.onChange(V(new Date(P.value).toLocaleDateString(),"YYYY-MM-DD HH:mm:ss")):E.onChange(P.value)},disabled:me})})}),ie("dataVencimento")]}),e.jsxs("div",{className:"field col-12 md:col-6",children:[e.jsx("label",{htmlFor:"dataPagamento",children:"Pagamento"}),e.jsx(w,{name:"dataPagamento",control:oe,defaultValue:f.dataPagamento?V(f.dataPagamento,"DD/MM/YYYY"):void 0,render:({field:E,fieldState:$})=>e.jsx(e.Fragment,{children:e.jsx(Te,{...E,id:"dataPagamento",value:E.value?new Date(Date.parse(E.value)):void 0,mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",showIcon:!0,showButtonBar:!0,pt:{input:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}}},onChange:P=>{P.preventDefault(),P.value?E.onChange(V(new Date(P.value).toLocaleDateString(),"YYYY-MM-DD HH:mm:ss")):E.onChange(P.value)}})})}),ie("dataPagamento")]}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"tipo",children:"Tipo"}),e.jsx(w,{name:"tipo",control:oe,defaultValue:f.tipo,rules:{required:Me},render:({field:E,fieldState:$})=>e.jsx(G,{id:"tipo",value:E.value,options:["RECEITA","DESPESA"],optionLabel:"",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onChange:P=>{P.preventDefault(),E.onChange(P.value)},disabled:!0})}),ie("tipo")]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"statusFinanceiro",children:"Status"}),e.jsx(w,{name:"statusFinanceiro",control:oe,defaultValue:f.statusFinanceiro,rules:{required:Me},render:({field:E,fieldState:$})=>e.jsx(G,{id:"statusFinanceiro",value:E.value,options:["PENDENTE","PAGO"],optionLabel:"",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onChange:P=>{P.preventDefault(),E.onChange(P.value)},disabled:me})}),ie("statusFinanceiro")]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idUnidade",children:"Unidade"}),e.jsx(w,{name:"idUnidade",control:oe,defaultValue:f.idUnidade,render:({field:E,fieldState:$})=>e.jsx(G,{id:"idUnidade",value:E.value,options:J,optionLabel:"label",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onChange:P=>{P.preventDefault(),E.onChange(P.value)},disabled:me})}),ie("idUnidade")]})}),e.jsxs("div",{className:"field col-12",children:[e.jsx(w,{name:"comprovante",control:oe,defaultValue:f.comprovante,render:({field:E,fieldState:$})=>e.jsx(ha,{...E,id:"comprovante",mode:"basic",multiple:!1,name:"file",url:"/api/upload",accept:"image/jpeg,image/png,application/pdf",maxFileSize:3*1024*1024,chooseLabel:"Escolha o arquivo! (max. 3MB)",pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onValidationFail:P=>{var te,X,K;console.log("onValidationFail: ",P);const Z=ba(P,3*1024*1024);Z.status||(K=j.current)==null||K.show([{severity:"error",summary:(te=Z.message)==null?void 0:te.summary,detail:(X=Z.message)==null?void 0:X.detail}])},onSelect:P=>{P.originalEvent.preventDefault(),E.onChange(P),Ot(P.files)}})}),e.jsx(xa,{ref:j,id:"size-message-error",pt:{wrapper:{className:"p-1"},summary:{className:"text-sm"},detail:{className:"text-sm"}}}),Qt(),ie("comprovante")]}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacao",children:"Observações"}),e.jsx(w,{name:"observacao",control:oe,defaultValue:f.observacao,render:({field:E,fieldState:$})=>e.jsx(de,{id:"observacao",value:E.value,rows:3,cols:20,autoResize:!0,pt:{root:{className:C("p-inputtext-sm w-full",{"p-invalid":$.error})}},onInput:P=>{P.preventDefault(),E.onChange(P.currentTarget.value)},disabled:me})}),ie("observacao")]}),e.jsxs("div",{className:"flex align-items-center justify-content-end gap-2 mb-4",children:[e.jsx(T,{label:"Cancelar",severity:"danger",icon:"pi pi-times",onClick:at}),e.jsx(T,{label:"Salvar",type:"submit",icon:"pi pi-check"})]})]})})})})," "]}),e.jsx(ae,{visible:h,style:{width:"450px"},header:"Confirmação",modal:!0,footer:Gt,onHide:st,children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),f&&e.jsxs("span",{children:["Você tem certeza que deseja excluir o item"," ",e.jsx("b",{children:f.titulo}),"?"]})]})}),e.jsx(ae,{visible:g,style:{width:"450px"},header:"Confirmação",modal:!0,footer:Wt,onHide:nt,children:e.jsxs("div",{className:"flex align-items-center justify-content-center",children:[e.jsx("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),f&&e.jsxs("span",{children:["Tem certeza que deseja excluir todos os"," ",u.length?e.jsx("b",{children:u.length}):""," ","itens selecionados?",e.jsx(fa,{style:{width:"100%",height:"150px"},children:e.jsx("ul",{children:u.length&&u.map(E=>e.jsx(e.Fragment,{children:e.jsx("li",{children:e.jsx("code",{children:E.titulo},q())})}))})})]})]})})]})})})})}const qe=({title:a="Financeiro",tipo:s})=>{const[t]=m.useState(),{state:o,dispatch:r}=z(),[n,p]=m.useState(!1),[l,j]=m.useState();return m.useEffect(()=>{(async()=>{r({type:"FETCH_DATA_REQUEST"});try{const y=k.getCurrentUserField(le.IdUnidade);let x=[];k.userIsCondomino()?y&&(x=await se.getInstance().getFinanceiroMensalidade(y,l)):k.userIsCondomino()?x=[]:x=s?await se.getInstance().getFinanceiroByTipo(s,l):await se.getInstance().getAllFinanceiroData(l),r({type:"FETCH_DATA_ARRAY_SUCCESS",payload:x})}catch(y){r({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+y})}})().then(y=>y)},[r,t,s,n,l]),e.jsx(W,{title:a,children:e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(Ms,{financeirosData:o.dataArray,loading:o.loading,loadingMessage:o.error,tipo:s,reload:b=>{H(1e3).then(()=>{p(b)})},exportAnoCalendario:b=>{j(b)}})})})})},ks={startsWith:"Começa com",contains:"Contém",notContains:"Não contém",endsWith:"Termina com",equals:"Igual",notEquals:"Diferente",noFilter:"Sem filtro",filter:"Filtro",lt:"Menor que",lte:"Menor que ou igual a",gt:"Maior que",gte:"Maior que ou igual a",dateIs:"Data é",dateIsNot:"Data não é",dateBefore:"Date é anterior",dateAfter:"Data é posterior",custom:"Customizado",clear:"Limpar",close:"Fechar",apply:"Aplicar",matchAll:"Match All",matchAny:"Match Any",addRule:"Adicionar Regra",removeRule:"Remover Regra",accept:"Sim",reject:"Não",choose:"Escolha",upload:"Upload",cancel:"Cancelar",completed:"Concluído",pending:"Pendente",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Do","Se","Te","Qa","Qi","Sx","Sa"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],chooseYear:"Escolha Ano",chooseMonth:"Escolha Mês",chooseDate:"Escolha Data",prevDecade:"Década Anterior",nextDecade:"Década Seguinte",prevYear:"Ano Anterior",nextYear:"Ano Seguinte",prevMonth:"Mês Anterior",nextMonth:"Mês Seguinte",prevHour:"Hora Anterior",nextHour:"Hora Seguinte",prevMinute:"Minuto Anterior",nextMinute:"Minuto Seguinte",prevSecond:"Segundo Anterior",nextSecond:"Segundo Seguinte",am:"am",pm:"pm",today:"Hoje",now:"Agora",weekHeader:"Sem",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"dd/mm/yy",weak:"Fraco",medium:"Médio",strong:"Forte",passwordPrompt:"Digite uma senha",emptyFilterMessage:"Nenhum resultado encontrado",searchMessage:"{0} resultados disponíveis",selectionMessage:"{0} itens selecionados",emptySelectionMessage:"Nenhum item selecionado",emptySearchMessage:"Nenhum resultado encontrado",emptyMessage:"Nenhuma opção disponível",aria:{trueLabel:"Verdadeiro",falseLabel:"Falso",nullLabel:"Não selecionado",star:"1 estrela",stars:"{star} estrelas",selectAll:"Todos itens selecionados",unselectAll:"Nenhum item selecionado",close:"Fechar",previous:"Anterior",next:"Seguinte",navigation:"Navegação",scrollTop:"Rolar para Topo",moveTop:"Mover para Topo",moveUp:"Mover para Cima",moveDown:"Mover para Baixo",moveBottom:"Mover para Final",moveToTarget:"Mover para Alvo",moveToSource:"Mover para Fonte",moveAllToTarget:"Mover Todos para Alvo",moveAllToSource:"Mover Todos para Fonte",pageLabel:"Página {page}",firstPageLabel:"Primeira Página",lastPageLabel:"Última Página",nextPageLabel:"Página Seguinte",previousPageLabel:"Página Anterior",rowsPerPageLabel:"Linhas por página",jumpToPageDropdownLabel:"Pular para Menu da Página",jumpToPageInputLabel:"Pular para Campo da Página",selectRow:"Linha Selecionada",unselectRow:"Linha Não Selecionada",expandRow:"Linha Expandida",collapseRow:"Linha Recolhida",showFilterMenu:"Mostrar Menu de Filtro",hideFilterMenu:"Esconder Menu de Filtro",filterOperator:"Operador de Filtro",filterConstraint:"Restrição de Filtro",editRow:"Editar Linha",saveEdit:"Salvar Editar",cancelEdit:"Cancelar Editar",listView:"Exibição em Lista",gridView:"Exibição em Grade",slide:"Deslizar",slideNumber:"{slideNumber}",zoomImage:"Ampliar Imagem",zoomIn:"Mais Zoom",zoomOut:"Menos Zoom",rotateRight:"Girar à Direita",rotateLeft:"Girar à Esquerda"}},$s={pt:ks},Os=()=>{const{state:a,dispatch:s}=z(),[t,o]=m.useState([]),[r,n]=m.useState([]),[p,l]=m.useState(),j=m.useRef(null);m.useEffect(()=>{(async()=>{s({type:"FETCH_DATA_REQUEST"});try{const v=k.getCurrentUserField(le.IdUnidade);let N=[];k.userIsCondomino()?v&&(N=await se.getInstance().getFinanceiroByUnidade(v,p)):k.userIsCondomino()?N=[]:N=await se.getInstance().getAllFinanceiroData(p),s({type:"FETCH_DATA_ARRAY_SUCCESS",payload:N})}catch(v){s({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+v})}})().then(v=>v)},[p]),m.useEffect(()=>{o(a.dataArray??[])},[t,a]),m.useEffect(()=>{const x=Oe(_e);(async()=>{const N=await x.list("unidadescompletas");n(N.records)})().then(N=>N)},[]),m.useEffect(()=>{l($e())},[]);const b=x=>{let v=null;for(let N=0;N<(r==null?void 0:r.length);N++)if(r[N].id===x){v=r[N];break}return v?`${v==null?void 0:v.nomeCondominio}. Bl.${v==null?void 0:v.numero} - Ap.${v==null?void 0:v.bloco}`:""},y=Ge.useReactToPrint({content:()=>j.current,documentTitle:"RelatórioFinanceiro.pdf",copyStyles:!0,onAfterPrint:()=>{console.log("Printed PDF successfully!")}});return e.jsx(e.Fragment,{children:e.jsxs(W,{children:[e.jsxs("div",{className:"card md:justify-content-start md:align-items-center",children:[e.jsxs("h5",{className:"m-0",children:["Ano Calendário ",p]}),e.jsx("hr",{}),e.jsx("div",{children:e.jsxs("span",{className:"block mt-2 md:mt-0 p-input-icon-left ml-2",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(G,{id:"tipo",value:p??$e(),options:It(),optionLabel:"",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm","w-full")}},onChange:x=>{x.preventDefault(),l(x.value)}})]})})]}),e.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:e.jsx("div",{children:t.length?e.jsxs("div",{className:"ml-4 mr-4 ",children:[e.jsx("div",{className:"formgrid grid",children:t==null?void 0:t.map(x=>e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"card noborder mt-2",children:[e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"titulo",children:"Título"}),e.jsx(_,{id:"titulo",type:"text",value:x.titulo,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"valor",children:"Valor"}),e.jsx(Je,{id:"valor",value:x.valor,mode:"currency",currency:"BRL",locale:"pt-BR",minFractionDigits:2,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"dataVencimento",children:"Vencimento"}),e.jsx(Te,{id:"dataVencimento",value:new Date(Date.parse(x.dataVencimento)),mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",readOnlyInput:!0,disabled:!0,pt:{input:{root:{className:C("p-inputtext-sm","w-full")}}}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"dataPagamento",children:"Pagamento"}),e.jsx(Te,{id:"dataPagamento",value:x.dataPagamento?new Date(Date.parse(x.dataPagamento)):void 0,mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",readOnlyInput:!0,disabled:!0,pt:{input:{root:{className:C("p-inputtext-sm","w-full")}}}})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"tipo",children:"Tipo"}),e.jsx(_,{id:"tipo",type:"text",value:x.tipo,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"statusFinanceiro",children:"Status"}),e.jsx(_,{id:"status",type:"text",value:x.statusFinanceiro,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idUnidade",children:"Unidade"}),e.jsx(_,{id:"idUnidade",type:"text",value:b(x==null?void 0:x.idUnidade),readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"comprovante",children:"Comprovante"}),e.jsx(_,{id:"comprovante",type:"text",value:x.comprovante,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacao",children:"Observações"}),e.jsx(de,{id:"observacao",value:x.observacao,rows:3,cols:20,autoResize:!0,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]},q()),e.jsx("div",{className:"page-break"})]}))}),e.jsx("div",{className:"flex align-items-center justify-content-start gap-2 mb-4 hide-print",children:e.jsx(T,{label:"Imprimir",className:"hide-print",onClick:y})})]}):e.jsx("div",{className:"ml-4 mr-4 cent",children:e.jsx("div",{className:"formgrid grid",children:e.jsx("div",{className:"card md:justify-content-start md:align-items-center",children:e.jsx("h5",{className:"m-0",children:e.jsxs("div",{className:"cent",children:["Sem registros para o ano de ",p]})})})})})})})]})})},be=class be{constructor(){R(this,"getAllUsuariosCondominos",async()=>{const s=await O({method:"GET",url:`${F}/usuarioscondominos`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(s.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os dados.",cause:s.statusText,details:{errorCode:s.status,additionalInfo:"Failed to fetch data"}});return s.data});R(this,"getAllUsuariosSindicos",async()=>{const s=await O({method:"GET",url:`${F}/usuariossindicos?page=0,100`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});if(s.status!==200)throw new Y({name:"GET_ERROR",message:"Ocorreu um erro ao carregar os dados.",cause:s.statusText,details:{errorCode:s.status,additionalInfo:"Failed to fetch data"}});return s.data})}static getInstance(){return be.instance||(be.instance=new be),be.instance}};R(be,"instance",null);let Be=be;const Us=()=>{const{state:a,dispatch:s}=z(),[t,o]=m.useState([]),r=m.useRef(null);m.useEffect(()=>{(async()=>{s({type:"FETCH_DATA_REQUEST"});try{let j=[];k.userIsCondomino()?j=[]:j=await Be.getInstance().getAllUsuariosCondominos(),s({type:"FETCH_DATA_ARRAY_SUCCESS",payload:j})}catch(j){s({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+j})}})().then(j=>j)},[]),m.useEffect(()=>{o(a.dataArray??[])},[t,a]);const n=l=>{let j=null;for(let b=0;b<(t==null?void 0:t.length);b++)if(t[b].id===l){j=t[b];break}return j?`Bl.${j==null?void 0:j.numero} - Ap.${j==null?void 0:j.bloco}. ${j==null?void 0:j.nomeCondominio}.`:""},p=Ge.useReactToPrint({content:()=>r.current,documentTitle:"RelatórioCondominos.pdf",copyStyles:!0,onAfterPrint:()=>{console.log("Printed PDF successfully!")}});return e.jsx(e.Fragment,{children:e.jsx(W,{children:e.jsx("div",{ref:r,style:{width:"100%",height:"100%"},children:e.jsx("div",{children:t.length?e.jsxs("div",{className:"ml-4 mr-4",children:[e.jsx("div",{className:"formgrid grid",children:t==null?void 0:t.map(l=>e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"card noborder mt-2",children:[e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"flex align-items-center gap-2",children:[e.jsx("div",{children:e.jsx(re,{imageAlt:l.nome,image:l.imagemPerfil&&l.uuid?Ie(l.imagemPerfil,l.uuid):"",className:"p-mr-2",style:{verticalAlign:"middle"},size:"large",shape:"circle",icon:"pi pi-user",pt:{image:{width:32}}})}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("span",{style:{marginLeft:".5em",verticalAlign:"middle"},children:l.nome})}),e.jsx("div",{children:e.jsx("span",{className:"text-color-secondary text-sm",style:{marginLeft:".5em",verticalAlign:"middle"},children:l.email})})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"cpf",children:"CPF"}),e.jsx(L,{id:"cpf",value:l.cpf,mask:"999.999.999-99",placeholder:"000.000.000-00",readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"contato",children:"Contato"}),e.jsx(L,{id:"contato",value:l.contato,mask:l.contato.length===11?"(99)99999-9999":"(99)9999-9999",placeholder:"(00)00000-0000",readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"dataEntrada",children:"Entrada"}),e.jsx(Te,{id:"dataEntrada",value:new Date(Date.parse(l.dataEntrada)),mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",readOnlyInput:!0,disabled:!0,pt:{input:{root:{className:C("p-inputtext-sm","w-full")}}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"dataSaida",children:"Saída"}),e.jsx(Te,{id:"dataSaida",value:l.dataSaida?new Date(Date.parse(l.dataSaida)):void 0,mask:"99/99/9999",placeholder:"DD/MM/YYYY",dateFormat:"dd/mm/yy",locale:"pt",readOnlyInput:!0,disabled:!0,pt:{input:{root:{className:C("p-inputtext-sm","w-full")}}}})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"proprietario",children:"Proprietário"}),e.jsx("i",{className:C("pi",{"text-green-500 pi-check-circle":l.proprietario,"text-pink-500 pi-times-circle":!l.proprietario})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"statusFinanceiro",children:"Status"}),e.jsx(_,{id:"status",type:"text",value:n(l.id),readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]})}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacao",children:"Observações"}),e.jsx(de,{id:"observacao",value:l.observacao,rows:3,cols:20,autoResize:!0,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]},q()),e.jsx("div",{className:"page-break"})]}))}),e.jsx("div",{className:"flex align-items-center justify-content-start gap-2 mb-4 hide-print",children:e.jsx(T,{label:"Imprimir",className:"hide-print",onClick:p})})]}):e.jsx("div",{className:"ml-4 mr-4 cent",children:e.jsx("div",{className:"formgrid grid",children:e.jsx("div",{className:"card md:justify-content-start md:align-items-center",children:e.jsx("h5",{className:"m-0",children:e.jsx("div",{className:"cent",children:"Sem registros"})})})})})})})})})},_s=()=>{const{state:a,dispatch:s}=z(),[t,o]=m.useState([]),[r,n]=m.useState(),[p,l]=m.useState(),j=m.useRef(null);m.useEffect(()=>{(async()=>{s({type:"FETCH_DATA_REQUEST"});try{let x=[];k.userIsCondomino()?x=[]:x=await ne.getInstance().getAllUnidades(p==null?void 0:p.id),s({type:"FETCH_DATA_ARRAY_SUCCESS",payload:x})}catch(x){s({type:"FETCH_DATA_FAILURE",payload:"error fetching data: "+x})}})().then(x=>x)},[p]),m.useEffect(()=>{o(a.dataArray??[])},[t,a]),m.useEffect(()=>{const y=Oe(_e);(async()=>{const v=await y.list("condominiosdistinct");n(v.records)})().then(v=>v)},[]);const b=Ge.useReactToPrint({content:()=>j.current,documentTitle:"RelatórioCondominos.pdf",copyStyles:!0,onAfterPrint:()=>{console.log("Printed PDF successfully!")}});return e.jsx(e.Fragment,{children:e.jsxs(W,{children:[e.jsxs("div",{className:"card md:justify-content-start md:align-items-center",children:[e.jsx("h5",{className:"m-0",children:p!=null&&p.nome?p.nome:"Todos os Condomínios"}),e.jsx("hr",{}),e.jsx("div",{children:e.jsxs("span",{className:"block mt-2 md:mt-0 p-input-icon-left ml-2",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(G,{id:"tipo",value:p,options:r,optionLabel:"nome",placeholder:"Selecione...",emptyMessage:"Sem resultados",pt:{root:{className:C("p-inputtext-sm","w-full")}},onChange:y=>{y.preventDefault(),l(y.value)}})]})})]}),e.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:e.jsx("div",{children:t.length?e.jsxs("div",{className:"ml-4 mr-4",children:[e.jsx("div",{className:"formgrid grid",children:t==null?void 0:t.map(y=>e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"card noborder mt-2",children:[e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"bloco",children:"Bloco"}),e.jsx(_,{id:"bloco",value:`Bl.${y.bloco}`,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"numero",children:"Apartamento"}),e.jsx(_,{id:"numero",value:`Ap.${y.numero}`,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]})}),e.jsx("div",{className:"field col-12",children:e.jsxs("div",{className:"formgrid grid",children:[e.jsx("label",{htmlFor:"condominio",children:"Condomínio"}),e.jsx(_,{id:"condominio",value:y.nomeCondominio,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})}),e.jsxs("div",{className:"field col-12",children:[e.jsx("label",{htmlFor:"observacao",children:"Observações"}),e.jsx(de,{id:"observacao",value:y.observacao,rows:3,cols:20,autoResize:!0,readOnly:!0,pt:{root:{className:C("p-inputtext-sm","w-full")}}})]})]},q()),e.jsx("div",{className:"page-break"})]}))}),e.jsx("div",{className:"flex align-items-center justify-content-start gap-2 mb-4 hide-print",children:e.jsx(T,{label:"Imprimir",className:"hide-print",onClick:b})})]}):e.jsx("div",{className:"ml-4 mr-4 cent",children:e.jsx("div",{className:"formgrid grid",children:e.jsx("div",{className:"card md:justify-content-start md:align-items-center",children:e.jsx("h5",{className:"m-0",children:e.jsx("div",{className:"cent",children:"Sem registros"})})})})})})})]})})};history.replaceState(0,"","/sgco/app/#/");Ft.extend(ra);function Ys(){const a=()=>window.location.hash.replace(/^#/,"")||"/",s=n=>{na("#"+n.toString())},t=()=>[sa(a),s],[o,r]=m.useState();return ga("pt",$s.pt),m.useEffect(()=>{const n=localStorage.getItem(k.USER_KEY);n&&r(JSON.parse(n))},[]),e.jsx(e.Fragment,{children:e.jsx(ta,{hook:t,children:e.jsxs(aa,{children:[e.jsx(U,{path:"/",children:()=>o?e.jsx(ht,{title:""}):e.jsx(Et,{})}),e.jsx(U,{path:"/dashboard",children:()=>e.jsx(ht,{})}),e.jsx(U,{path:"/about",component:Ls}),e.jsx(U,{path:"/mensagens/list",component:Ya}),e.jsx(U,{path:"/condominos/list",component:_a}),e.jsx(U,{path:"/condominos/add/:id",children:n=>e.jsx(pt,{id:n.id})}),e.jsx(U,{path:"/condominos/add",children:e.jsx(pt,{id:null})}),e.jsx(U,{path:"/condominios/list",component:Za}),e.jsx(U,{path:"/condominios/add/:id",children:n=>e.jsx(gt,{id:n.id})}),e.jsx(U,{path:"/condominios/add",children:e.jsx(gt,{id:null})}),e.jsx(U,{path:"/enderecos/list",component:jt}),e.jsx(U,{path:"/enderecos/add/:id",children:n=>e.jsx(ke,{id:n.id})}),e.jsx(U,{path:"/enderecos/add",children:e.jsx(ke,{id:null})}),e.jsx(U,{path:"/enderecos/list",component:jt}),e.jsx(U,{path:"/enderecos/add/:id",children:n=>e.jsx(ke,{id:n.id})}),e.jsx(U,{path:"/enderecos/add",children:e.jsx(ke,{id:null})}),e.jsx(U,{path:"/mensalidades/list",children:()=>e.jsx(qe,{})}),e.jsx(U,{path:"/receitas/list",children:()=>e.jsx(qe,{tipo:"RECEITA"})}),e.jsx(U,{path:"/despesas/list",children:()=>e.jsx(qe,{tipo:"DESPESA"})}),e.jsx(U,{path:"/enderecos/add/:id",children:n=>e.jsx(ke,{id:n.id})}),e.jsx(U,{path:"/unidades/list",component:xs}),e.jsx(U,{path:"/unidades/add/:id",children:n=>e.jsx(Ct,{id:n.id})}),e.jsx(U,{path:"/unidades/add",children:e.jsx(Ct,{id:null})}),e.jsx(U,{path:"/sindicos/list",component:Ns}),e.jsx(U,{path:"/sindicos/add/:id",children:n=>e.jsx(St,{id:n.id})}),e.jsx(U,{path:"/sindicos/add",children:e.jsx(St,{id:null})}),e.jsx(U,{path:"/login",component:Et}),e.jsx(U,{path:"/relatorios/financeiro",children:e.jsx(Os,{})}),e.jsx(U,{path:"/relatorios/condominos",children:e.jsx(Us,{})}),e.jsx(U,{path:"/relatorios/unidades",children:e.jsx(_s,{})}),e.jsx(U,{component:va})]})})})}const Ls=()=>e.jsx("div",{children:"Your About component content"});const Vs="modulepreload",zs=function(a){return"/sgco/app/"+a},Tt={},qs=function(s,t,o){if(!t||t.length===0)return s();const r=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=zs(n),n in Tt)return;Tt[n]=!0;const p=n.endsWith(".css"),l=p?'[rel="stylesheet"]':"";if(!!o)for(let y=r.length-1;y>=0;y--){const x=r[y];if(x.href===n&&(!p||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${l}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Vs,p||(b.as="script",b.crossOrigin=""),b.href=n,document.head.appendChild(b),p)return new Promise((y,x)=>{b.addEventListener("load",y),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s()).catch(n=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=n,window.dispatchEvent(p),!p.defaultPrevented)throw n})},Hs=a=>{a&&qs(()=>import("./web-vitals-9f4c2f45.js"),[]).then(({onCLS:s,onFID:t,onFCP:o,onLCP:r,onTTFB:n})=>{s(a),t(a),o(a),r(a),n(a)})};oa.createRoot(document.getElementById("root")).render(e.jsx(ia.StrictMode,{children:e.jsx(Ys,{})}));Hs();
//# sourceMappingURL=index-3146f0f8.js.map
